<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../../genindex.html" /><link rel="search" title="Search" href="../../../../search.html" /><link rel="next" title="How to Finetune a cross-encoder using LLamaIndex" href="../../cross_encoder_finetuning/cross_encoder_finetuning.html" /><link rel="prev" title="Knowledge Distillation For Fine-Tuning A GPT-3.5 Judge (Correctness)" href="../correctness/finetune_llm_judge_single_grading_correctness.html" />

    <!-- Generated with Sphinx 5.3.0 and Furo 2023.03.27 -->
        <title>Knowledge Distillation For Fine-Tuning A GPT-3.5 Judge (Pairwise) - LlamaIndex 🦙 0.9.8.post1</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/algolia.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style><script async type="text/javascript" src="/_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="llamaindex-llamaindex" /><meta name="readthedocs-version-slug" content="stable" /></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../index.html"><div class="brand">LlamaIndex 🦙 0.9.8.post1
</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../../index.html">
  
  
  <span class="sidebar-brand-text">LlamaIndex 🦙 0.9.8.post1
</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/installation.html">Installation and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/reading.html">How to read these docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/starter_example.html">Starter Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/concepts.html">High-Level Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/customization.html">Customization Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/discover_llamaindex.html">Discover LlamaIndex Video Series</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use Cases</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../use_cases/q_and_a.html">Q&amp;A</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../use_cases/chatbots.html">Chatbots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../use_cases/agents.html">Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../use_cases/extraction.html">Structured Data Extraction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../use_cases/multimodal.html">Multi-modal</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../multi_modal/gpt4v_multi_modal_retrieval.html">Advanced Multi-Modal Retrieval using GPT4V and Multi-Modal Index/Retriever</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../multi_modal/multi_modal_retrieval.html">Multi-modal retrieval with CLIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../multi_modal/image_to_image_retrieval.html">Image to Image Retrieval</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../multi_modal/llava_multi_modal_tesla_10q.html">Retrieval-Augmented Image Captioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../multi_modal/ChromaMultiModalDemo.html">Chroma Multi-Modal Demo with LlamaIndex</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Understanding</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../understanding/understanding.html">Building an LLM application</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../understanding/using_llms/using_llms.html">Using LLMs</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../understanding/using_llms/privacy.html">Privacy and Security</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../understanding/loading/loading.html">Loading</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../understanding/loading/llamahub.html">LlamaHub</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../understanding/indexing/indexing.html">Indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../understanding/storing/storing.html">Storing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../understanding/querying/querying.html">Querying</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../understanding/putting_it_all_together/putting_it_all_together.html">Putting It All Together</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../understanding/putting_it_all_together/q_and_a.html">Q&amp;A patterns</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../understanding/putting_it_all_together/q_and_a/terms_definitions_tutorial.html">A Guide to Extracting Terms and Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../understanding/putting_it_all_together/q_and_a/unified_query.html">A Guide to Creating a Unified Query Framework over your Indexes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../understanding/putting_it_all_together/graphs.html">Knowledge Graphs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../understanding/putting_it_all_together/structured_data.html">Structured Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../understanding/putting_it_all_together/structured_data.html#a-guide-to-llamaindex-structured-data">A Guide to LlamaIndex + Structured Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../understanding/putting_it_all_together/structured_data/Airbyte_demo.html">Airbyte SQL Index Guide</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../understanding/putting_it_all_together/apps.html">Full-Stack Web Application</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../understanding/putting_it_all_together/apps/fullstack_app_guide.html">A Guide to Building a Full-Stack Web App with LLamaIndex</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../understanding/putting_it_all_together/apps/fullstack_with_delphic.html">A Guide to Building a Full-Stack LlamaIndex Web App with Delphic</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../understanding/putting_it_all_together/chatbots/building_a_chatbot.html">How to Build a Chatbot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../understanding/putting_it_all_together/agents.html">Agents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../understanding/tracing_and_debugging/tracing_and_debugging.html">Tracing and Debugging</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../understanding/evaluating/evaluating.html">Evaluating</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../understanding/evaluating/cost_analysis/root.html">Cost Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../understanding/evaluating/cost_analysis/usage_pattern.html">Usage Pattern</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Optimizing</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../optimizing/basic_strategies/basic_strategies.html">Basic Strategies</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../prompts/prompt_mixin.html">Accessing/Customizing Prompts within Higher-Level Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../prompts/advanced_prompts.html">Advanced Prompt Techniques (Variable Mappings, Functions)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../prompts/advanced_prompts.html">Advanced Prompt Techniques (Variable Mappings, Functions)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../prompts/prompts_rag.html">Prompt Engineering for RAG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../retrievers/bm25_retriever.html">BM25 Retriever</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../retrievers/reciprocal_rerank_fusion.html">Reciprocal Rerank Fusion Retriever</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../vector_stores/WeaviateIndexDemo-Hybrid.html">Weaviate Vector Store - Hybrid Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../vector_stores/PineconeIndexDemo-Hybrid.html">Pinecone Vector Store - Hybrid Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/indexing/vector_store_guide.html">Vector Store Index</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/loading/documents_and_nodes/usage_documents.html">Defining and Customizing Documents</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/loading/documents_and_nodes/usage_nodes.html">Defining and Customizing Nodes</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/loading/documents_and_nodes/usage_metadata_extractor.html">Metadata Extraction Usage Pattern</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../metadata_extraction/MetadataExtractionSEC.html">Extracting Metadata for Better Document Indexing and Understanding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../metadata_extraction/MetadataExtraction_LLMSurvey.html">Automated Metadata Extraction for Better Retrieval + Synthesis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../metadata_extraction/EntityExtractionClimate.html">Entity Metadata Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../metadata_extraction/MarvinMetadataExtractorDemo.html">Metadata Extraction and Augmentation w/ Marvin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../metadata_extraction/PydanticExtractor.html">Pydantic Extractor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../optimizing/advanced_retrieval/advanced_retrieval.html">Advanced Retrieval Strategies</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../optimizing/advanced_retrieval/query_transformations.html">Query Transformations</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../query_transformations/HyDEQueryTransformDemo.html">HyDE Query Transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_transformations/SimpleIndexDemo-multistep.html">Multi-Step Query Engine</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../optimizing/advanced_retrieval/structured_outputs/pydantic_program.html">Pydantic Program</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../output_parsing/openai_pydantic_program.html">OpenAI Pydantic Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../output_parsing/guidance_pydantic_program.html">Guidance Pydantic Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../output_parsing/guidance_sub_question.html">Guidance for Sub-Question Query Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../output_parsing/df_program.html">DataFrame Structured Data Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../output_parsing/evaporate_program.html">Evaporate Demo</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../optimizing/advanced_retrieval/structured_outputs/query_engine.html">Query Engines + Pydantic Outputs</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../query_engine/pydantic_query_engine.html">Query Engine with Pydantic Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../response_synthesizers/pydantic_tree_summarize.html">Pydantic Tree Summarize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../response_synthesizers/pydantic_tree_summarize.html#download-data">Download Data</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../optimizing/advanced_retrieval/structured_outputs/structured_outputs.html">Structured Outputs</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../optimizing/advanced_retrieval/structured_outputs/pydantic_program.html">Pydantic Program</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../output_parsing/openai_pydantic_program.html">OpenAI Pydantic Program</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../output_parsing/guidance_pydantic_program.html">Guidance Pydantic Program</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../output_parsing/guidance_sub_question.html">Guidance for Sub-Question Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../output_parsing/df_program.html">DataFrame Structured Data Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../output_parsing/evaporate_program.html">Evaporate Demo</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../optimizing/advanced_retrieval/structured_outputs/query_engine.html">Query Engines + Pydantic Outputs</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/pydantic_query_engine.html">Query Engine with Pydantic Outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../response_synthesizers/pydantic_tree_summarize.html">Pydantic Tree Summarize</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../response_synthesizers/pydantic_tree_summarize.html#download-data">Download Data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../retrievers/deep_memory.html">DeepMemory (Activeloop)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../optimizing/agentic_strategies/agentic_strategies.html">Agentic strategies</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../agent/openai_agent.html">Build your own OpenAI Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agent/openai_agent_with_query_engine.html">OpenAI Agent with Query Engine Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agent/openai_agent_retrieval.html">Retrieval-Augmented OpenAI Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agent/openai_agent_query_cookbook.html">OpenAI Agent + Query Engine Experimental Cookbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agent/openai_agent_query_plan.html">OpenAI Agent Query Planning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agent/openai_agent_context_retrieval.html">Context-Augmented OpenAI Agent</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../optimizing/evaluation/evaluation.html">Evaluation</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../optimizing/evaluation/e2e_evaluation.html">End-to-End Evaluation</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/QuestionGeneration.html">QuestionGeneration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/batch_eval.html">BatchEvalRunner - Running Multiple Evaluations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/correctness_eval.html">Correctness Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/faithfulness_eval.html">Faithfulness Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/guideline_eval.html">Guideline Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/pairwise_eval.html">Pairwise Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/relevancy_eval.html">Relevancy Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/semantic_similarity_eval.html">Embedding Similarity Evaluator</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../optimizing/evaluation/component_wise_evaluation.html">Component Wise Evaluation</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/BeirEvaluation.html">BEIR Out of Domain Benchmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/HotpotQADistractor.html">HotpotQADistractor Demo</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/evaluating/root.html">Evaluating</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/evaluating/usage_pattern.html">Usage Pattern (Response Evaluation)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/evaluating/usage_pattern_retrieval.html">Usage Pattern (Retrieval)</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/evaluating/modules.html">Modules</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../evaluation/faithfulness_eval.html">Faithfulness Evaluator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../evaluation/relevancy_eval.html">Relevancy Evaluator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../evaluation/guideline_eval.html">Guideline Evaluator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../evaluation/correctness_eval.html">Correctness Evaluator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../evaluation/semantic_similarity_eval.html">Embedding Similarity Evaluator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../evaluation/Deepeval.html">LlamaIndex + DeepEval Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../evaluation/QuestionGeneration.html">QuestionGeneration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../evaluation/batch_eval.html">BatchEvalRunner - Running Multiple Evaluations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../evaluation/multi_modal/multi_modal_rag_evaluation.html">Evaluating Multi-Modal RAG</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../evaluation/retrieval/retriever_eval.html">Retrieval Evaluation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../optimizing/evaluation/component_wise_evaluation.html">Component Wise Evaluation</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/BeirEvaluation.html">BEIR Out of Domain Benchmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/HotpotQADistractor.html">HotpotQADistractor Demo</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../optimizing/evaluation/e2e_evaluation.html">End-to-End Evaluation</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/QuestionGeneration.html">QuestionGeneration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/batch_eval.html">BatchEvalRunner - Running Multiple Evaluations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/correctness_eval.html">Correctness Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/faithfulness_eval.html">Faithfulness Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/guideline_eval.html">Guideline Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/pairwise_eval.html">Pairwise Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/relevancy_eval.html">Relevancy Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/semantic_similarity_eval.html">Embedding Similarity Evaluator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../../../optimizing/fine-tuning/fine-tuning.html">Fine-tuning</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../embeddings/finetune_embedding_adapter.html">Fine-tuning an Adapter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../embeddings/finetune_embedding.html">Embedding Fine-tuning Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../router/router_finetune.html">Router Fine-tuning</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/run-llama/finetune-embedding">Embedding Fine-tuning Repo</a></li>
<li class="toctree-l2"><a class="reference external" href="https://medium.com/llamaindex-blog/fine-tuning-embeddings-for-rag-with-synthetic-data-e534409a3971">Embedding Fine-tuning Blog</a></li>
<li class="toctree-l2"><a class="reference external" href="https://colab.research.google.com/drive/1NgyCJVyrC2xcZ5lxt2frTU862v6eJHlc?usp=sharing">GPT-3.5 Fine-tuning Notebook (Colab)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../openai_fine_tuning.html">GPT-3.5 Fine-tuning Notebook (Notebook link)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../react_agent/react_agent_finetune.html">Fine-tuning a gpt-3.5 ReAct Agent on Better Chain of Thought</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../openai_fine_tuning_functions.html">[WIP] Function Calling Fine-tuning</a></li>
<li class="toctree-l2"><a class="reference external" href="https://colab.research.google.com/drive/1vWeJBXdFEObuihO7Z8ui2CAYkdHQORqo?usp=sharing">GPT-3.5 Fine-tuning Notebook (Colab)</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/jerryjliu/llama_index/blob/main/experimental/openai_fine_tuning/openai_fine_tuning.ipynb">GPT-3.5 Fine-tuning Notebook (in Repo)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../knowledge/finetune_retrieval_aug.html">Fine-tuning with Retrieval Augmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../openai_fine_tuning_functions.html">OpenAI Function Calling Fine-tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gradient/gradient_structured.html">Llama2 Structured Output Fine-tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../knowledge/finetune_knowledge.html">Fine-tuning to Memorize Knowledge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gradient/gradient_fine_tuning.html">Llama 2 Text-to-SQL Fine-tuning (w/ Gradient.AI)</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/run-llama/modal_finetune_sql">Llama 2 Text-to-SQL Fine-tuning (w/ Modal, Repo)</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/run-llama/modal_finetune_sql/blob/main/tutorial.ipynb">Llama 2 Text-to-SQL Fine-tuning (w/ Modal, Notebook)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/finetune_llm_judge_single_grading_correctness.html">Knowledge Distillation For Fine-Tuning A GPT-3.5 Judge (Correctness)</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Knowledge Distillation For Fine-Tuning A GPT-3.5 Judge (Pairwise)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cross_encoder_finetuning/cross_encoder_finetuning.html">Cross-Encoder Finetuning</a></li>
<li class="toctree-l2"><a class="reference external" href="https://medium.com/llamaindex-blog/easily-finetune-llama-2-for-your-text-to-sql-applications-ecd53640e10d">Finetuning Llama 2 for Text-to-SQL</a></li>
<li class="toctree-l2"><a class="reference external" href="https://colab.research.google.com/drive/1vWeJBXdFEObuihO7Z8ui2CAYkdHQORqo?usp=sharing">Finetuning GPT-3.5 to Distill GPT-4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rerankers/cohere_custom_reranker.html">Cohere Custom Reranker</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../optimizing/production_rag.html">Building Performant RAG Applications for Production</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../query_engine/pdf_tables/recursive_retriever.html">Recursive Retriever + Query Engine Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../index_structs/doc_summary/DocSummary.html">Document Summary Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../node_postprocessor/MetadataReplacementDemo.html">Metadata Replacement + Node Sentence Window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../vector_stores/chroma_auto_retriever.html">Auto-Retrieval from a Vector Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../index_structs/doc_summary/DocSummary.html">Document Summary Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../query_engine/recursive_retriever_agents.html">Recursive Retriever + Document Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../retrievers/auto_vs_recursive_retriever.html">Comparing Methods for Structured Retrieval (Auto-Retrieval vs. Recursive Retrieval)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../query_engine/sub_question_query_engine.html">Sub Question Query Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../query_engine/JointQASummary.html">Joint QA Summary Query Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../query_engine/recursive_retriever_agents.html">Recursive Retriever + Document Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../query_engine/RouterQueryEngine.html">Router Query Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agent/openai_agent_query_cookbook.html">OpenAI Agent + Query Engine Experimental Cookbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../agent/openai_agent_query_plan.html">OpenAI Agent Query Planning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../embeddings/finetune_embedding.html">Embedding Fine-tuning Guide</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../optimizing/building_rag_from_scratch.html">Building RAG from Scratch (Lower-Level)</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../low_level/ingestion.html">Building Data Ingestion from Scratch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../low_level/ingestion.html#pinecone">Pinecone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../low_level/ingestion.html#openai">OpenAI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../low_level/retrieval.html">Building Retrieval from Scratch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../low_level/oss_ingestion_retrieval.html">Building RAG from Scratch (Open-source only!)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../low_level/vector_store.html">Building a (Very Simple) Vector Store from Scratch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../low_level/response_synthesis.html">Building Response Synthesis from Scratch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../low_level/evaluation.html">Building Evaluation from Scratch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../low_level/router.html">Building a Router from Scratch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../low_level/fusion_retriever.html">Building an Advanced Fusion Retriever from Scratch</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Module Guides</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../module_guides/models/models.html">Models</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/models/llms.html">Using LLMs</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/models/llms/usage_standalone.html">Using LLMs as standalone modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/models/llms/usage_custom.html">Customizing LLMs within LlamaIndex Abstractions</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/models/llms/modules.html">Available LLM integrations</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/openai.html">OpenAI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/azure_openai.html">Azure OpenAI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/ai21.html">AI21</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/anthropic.html">Anthropic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/gradient_base_model.html">Gradient Base Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/gradient_model_adapter.html">Gradient Model Adapter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../customization/llms/SimpleIndexDemo-Huggingface_camel.html">HuggingFace LLM - Camel-5b</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../customization/llms/SimpleIndexDemo-Huggingface_stablelm.html">HuggingFace LLM - StableLM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../vector_stores/SimpleIndexDemoLlama-Local.html">Local Llama2 + VectorStoreIndex</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/everlyai.html">EverlyAI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/litellm.html">LiteLLM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/palm.html">PaLM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/predibase.html">Predibase</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/llama_2.html">Replicate - Llama 2 13B</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/vicuna.html">Replicate - Vicuna 13B</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../vector_stores/SimpleIndexDemoLlama2.html">Llama2 + VectorStoreIndex</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/langchain.html">LangChain LLM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/llama_api.html">Llama API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/llama_2_llama_cpp.html">LlamaCPP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/xinference_local_deployment.html">Xorbits Inference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/monsterapi.html">Monster API LLM Integration into LLamaIndex</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/rungpt.html">RunGPT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/rungpt.html#setup">Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/portkey.html">Portkey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/anyscale.html">Anyscale</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/ollama.html">Ollama - Llama 2 7B</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/clarifai.html">Clarifai LLM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/bedrock.html">Bedrock</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/bedrock.html#connect-to-bedrock-with-access-keys">Connect to Bedrock with Access Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/vertex.html">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/vertex.html#streaming-usage">Streaming Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/vertex.html#chat-usage">Chat Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/vertex.html#async-chat">Async Chat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/vertex.html#streaming-chat">Streaming Chat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/perplexity.html">Perplexity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../llm/openllm.html">OpenLLM</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/models/embeddings.html">Embeddings</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/OpenAI.html">OpenAI Embeddings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/Langchain.html">Langchain Embeddings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/cohereai.html">CohereAI Embeddings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/fastembed.html">Qdrant FastEmbed Embeddings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/gradient.html">Gradient Embeddings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../customization/llms/AzureOpenAI.html">Azure OpenAI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/custom_embeddings.html">Custom Embeddings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/huggingface.html">Local Embeddings with HuggingFace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/elasticsearch.html">Elasticsearch Embeddings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/clarifai.html">Embeddings with Clarifai</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/llm_rails.html">LLMRails Embeddings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/text_embedding_inference.html">Text Embedding Inference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/google_palm.html">Google PaLM Embeddings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/jinaai_embeddings.html">Jina Embeddings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../embeddings/voyageai.html">Voyage Embeddings</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/models/prompts.html">Prompts</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../module_guides/models/prompts/usage_pattern.html">Usage Pattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../customization/prompts/completion_prompts.html">Completion prompts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../customization/prompts/chat_prompts.html">Chat prompts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../prompts/prompt_mixin.html">Accessing/Customizing Prompts within Higher-Level Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../prompts/advanced_prompts.html">Advanced Prompt Techniques (Variable Mappings, Functions)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../prompts/prompts_rag.html">Prompt Engineering for RAG</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../prompts/prompt_optimization.html">“Optimization by Prompting” for RAG</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../prompts/emotion_prompt.html">EmotionPrompt in RAG</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/models/llms/local.html">Using local models</a></li>
<li class="toctree-l3"><a class="reference external" href="https://replicate.com/blog/run-llama-locally">Run Llama2 locally</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/models/embeddings.html">Embeddings</a><input class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/OpenAI.html">OpenAI Embeddings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/Langchain.html">Langchain Embeddings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/cohereai.html">CohereAI Embeddings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/fastembed.html">Qdrant FastEmbed Embeddings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/gradient.html">Gradient Embeddings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../customization/llms/AzureOpenAI.html">Azure OpenAI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/custom_embeddings.html">Custom Embeddings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/huggingface.html">Local Embeddings with HuggingFace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/elasticsearch.html">Elasticsearch Embeddings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/clarifai.html">Embeddings with Clarifai</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/llm_rails.html">LLMRails Embeddings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/text_embedding_inference.html">Text Embedding Inference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/google_palm.html">Google PaLM Embeddings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/jinaai_embeddings.html">Jina Embeddings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../embeddings/voyageai.html">Voyage Embeddings</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/models/multi_modal.html">[Beta] Multi-modal models</a><input class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../multi_modal/openai_multi_modal.html">Multi-Modal LLM using OpenAI GPT-4V model for image reasoning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../multi_modal/replicate_multi_modal.html">Multi-Modal LLM using Replicate LlaVa, Fuyu 8B, MiniGPT4 models for image reasoning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../multi_modal/multi_modal_retrieval.html">Multi-Modal Retrieval using GPT text embedding and CLIP image embedding for Wikipedia Articles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../multi_modal/llava_multi_modal_tesla_10q.html">Retrieval-Augmented Image Captioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../multi_modal/image_to_image_retrieval.html">Image to Image Retrieval using CLIP embedding and image correlation reasoning using GPT4V</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../multi_modal/gpt4v_multi_modal_retrieval.html">Advanced Multi-Modal Retrieval using GPT4V and Multi-Modal Index/Retriever</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../multi_modal/gpt4v_experiments_cot.html">GPT4-V Experiments with General, Specific questions and Chain Of Thought (COT) Prompting Technique.</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../multi_modal/ChromaMultiModalDemo.html">Chroma Multi-Modal Demo with LlamaIndex</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/multi_modal/multi_modal_rag_evaluation.html">Evaluating Multi-Modal RAG</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../module_guides/models/prompts.html">Prompts</a><input class="toctree-checkbox" id="toctree-checkbox-37" name="toctree-checkbox-37" role="switch" type="checkbox"/><label for="toctree-checkbox-37"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/models/prompts/usage_pattern.html">Usage Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../customization/prompts/completion_prompts.html">Completion prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../customization/prompts/chat_prompts.html">Chat prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../prompts/prompt_mixin.html">Accessing/Customizing Prompts within Higher-Level Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../prompts/advanced_prompts.html">Advanced Prompt Techniques (Variable Mappings, Functions)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../prompts/prompts_rag.html">Prompt Engineering for RAG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../prompts/prompt_optimization.html">“Optimization by Prompting” for RAG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../prompts/emotion_prompt.html">EmotionPrompt in RAG</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../module_guides/loading/loading.html">Loading</a><input class="toctree-checkbox" id="toctree-checkbox-38" name="toctree-checkbox-38" role="switch" type="checkbox"/><label for="toctree-checkbox-38"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/loading/connector/root.html">Data Connectors (LlamaHub)</a><input class="toctree-checkbox" id="toctree-checkbox-39" name="toctree-checkbox-39" role="switch" type="checkbox"/><label for="toctree-checkbox-39"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/loading/connector/usage_pattern.html">Usage Pattern</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/loading/connector/modules.html">Module Guides</a><input class="toctree-checkbox" id="toctree-checkbox-40" name="toctree-checkbox-40" role="switch" type="checkbox"/><label for="toctree-checkbox-40"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/simple_directory_reader.html">Simple Directory Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/PsychicDemo.html">Psychic Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/DeepLakeReader.html">DeepLake Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/QdrantDemo.html">Qdrant Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/DiscordDemo.html">Discord Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/MongoDemo.html">MongoDB Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/ChromaDemo.html">Chroma Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/MyScaleReaderDemo.html">MyScale Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/FaissDemo.html">Faiss Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/ObsidianReaderDemo.html">Obsidian Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/SlackDemo.html">Slack Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/WebPageDemo.html">Web Page Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/PineconeDemo.html">Pinecone Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/MboxReaderDemo.html">Mbox Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/MilvusReaderDemo.html">MilvusReader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/NotionDemo.html">Notion Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/GithubRepositoryReaderDemo.html">Github Repo Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/GoogleDocsDemo.html">Google Docs Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/DatabaseReaderDemo.html">Database Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/TwitterDemo.html">Twitter Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/WeaviateDemo.html">Weaviate Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/MakeDemo.html">Make Reader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../data_connectors/deplot/DeplotReader.html">Deplot Reader Demo</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/loading/documents_and_nodes/root.html">Documents / Nodes</a><input class="toctree-checkbox" id="toctree-checkbox-41" name="toctree-checkbox-41" role="switch" type="checkbox"/><label for="toctree-checkbox-41"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/loading/documents_and_nodes/usage_documents.html">Defining and Customizing Documents</a><input class="toctree-checkbox" id="toctree-checkbox-42" name="toctree-checkbox-42" role="switch" type="checkbox"/><label for="toctree-checkbox-42"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/loading/documents_and_nodes/usage_nodes.html">Defining and Customizing Nodes</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/loading/node_parsers/root.html">Node Parser Usage Pattern</a><input class="toctree-checkbox" id="toctree-checkbox-43" name="toctree-checkbox-43" role="switch" type="checkbox"/><label for="toctree-checkbox-43"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/loading/node_parsers/modules.html">Node Parser Modules</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/loading/ingestion_pipeline/root.html">Ingestion Pipeline</a><input class="toctree-checkbox" id="toctree-checkbox-44" name="toctree-checkbox-44" role="switch" type="checkbox"/><label for="toctree-checkbox-44"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/loading/ingestion_pipeline/transformations.html">Transformations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../module_guides/indexing/indexing.html">Indexing</a><input class="toctree-checkbox" id="toctree-checkbox-45" name="toctree-checkbox-45" role="switch" type="checkbox"/><label for="toctree-checkbox-45"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/indexing/index_guide.html">How Each Index Works</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/indexing/usage_pattern.html">Usage Pattern</a><input class="toctree-checkbox" id="toctree-checkbox-46" name="toctree-checkbox-46" role="switch" type="checkbox"/><label for="toctree-checkbox-46"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/indexing/metadata_extraction.html">Metadata Extraction</a><input class="toctree-checkbox" id="toctree-checkbox-47" name="toctree-checkbox-47" role="switch" type="checkbox"/><label for="toctree-checkbox-47"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../metadata_extraction/MetadataExtractionSEC.html">Extracting Metadata for Better Document Indexing and Understanding</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../metadata_extraction/MetadataExtraction_LLMSurvey.html">Automated Metadata Extraction for Better Retrieval + Synthesis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../metadata_extraction/EntityExtractionClimate.html">Entity Metadata Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../metadata_extraction/MarvinMetadataExtractorDemo.html">Metadata Extraction and Augmentation w/ Marvin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../metadata_extraction/PydanticExtractor.html">Pydantic Extractor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/indexing/document_management.html">Document Management</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/indexing/modules.html">Module Guides</a><input class="toctree-checkbox" id="toctree-checkbox-48" name="toctree-checkbox-48" role="switch" type="checkbox"/><label for="toctree-checkbox-48"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/indexing/vector_store_guide.html">Vector Store Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/indexing/index_guide.html">Summary Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/indexing/index_guide.html">Tree Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/indexing/index_guide.html">Keyword Table Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/knowledge_graph/KnowledgeGraphDemo.html">Knowledge Graph Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/knowledge_graph/KnowledgeGraphIndex_vs_VectorStoreIndex_vs_CustomIndex_combined.html">Custom Retriever combining KG Index and VectorStore Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_engine/knowledge_graph_query_engine.html">Knowledge Graph Query Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_engine/knowledge_graph_rag_query_engine.html">Knowledge Graph RAG Query Engine</a></li>
<li class="toctree-l3"><a class="reference external" href="https://colab.research.google.com/drive/1G6pcR0pXvSkdMQlAK_P-IrYgo-_staxd?usp=sharing">REBEL + Knowledge Graph Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/knowledge_graph/knowledge_graph2.html">REBEL + Wikipedia Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/struct_indices/SQLIndexDemo.html">SQL Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/struct_indices/duckdb_sql_query.html">SQL Query Engine with LlamaIndex + DuckDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/doc_summary/DocSummary.html">Document Summary Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../objects/object_index.html">The <code class="docutils literal notranslate"><span class="pre">ObjectIndex</span></code> Class</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/indexing/composability.html">Composability</a><input class="toctree-checkbox" id="toctree-checkbox-49" name="toctree-checkbox-49" role="switch" type="checkbox"/><label for="toctree-checkbox-49"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../composable_indices/ComposableIndices-Prior.html">Composable Graph Basic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../composable_indices/ComposableIndices-Weaviate.html">Composable Graph with Weaviate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../composable_indices/ComposableIndices.html">Composable Graph</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../module_guides/storing/storing.html">Storing</a><input class="toctree-checkbox" id="toctree-checkbox-50" name="toctree-checkbox-50" role="switch" type="checkbox"/><label for="toctree-checkbox-50"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/storing/customization.html">Customizing Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/storing/save_load.html">Persisting &amp; Loading Data</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/storing/vector_stores.html">Vector Stores</a><input class="toctree-checkbox" id="toctree-checkbox-51" name="toctree-checkbox-51" role="switch" type="checkbox"/><label for="toctree-checkbox-51"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/AstraDBIndexDemo.html">Astra DB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/AsyncIndexCreationDemo.html">Simple Vector Store - Async Index Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/AzureCosmosDBMongoDBvCoreDemo.html">Azure CosmosDB MongoDB Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CassandraIndexDemo.html">Cassandra Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/ChromaIndexDemo.html">Chroma</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html">Azure Cognitive Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html#basic-example">Basic Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html#create-index-if-it-does-not-exist">Create Index (if it does not exist)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html#use-existing-index">Use Existing Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html#adding-a-document-to-existing-index">Adding a document to existing index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html#filtering">Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/DashvectorIndexDemo.html">DashVector Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/DeepLakeIndexDemo.html">DeepLake Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/DocArrayHnswIndexDemo.html">DocArray Hnsw Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/DocArrayInMemoryIndexDemo.html">DocArray InMemory Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/EpsillaIndexDemo.html">Epsilla Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/LanceDBIndexDemo.html">LanceDB Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/MetalIndexDemo.html">Metal Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/MilvusIndexDemo.html">Milvus Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/MyScaleIndexDemo.html">MyScale Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/ElasticsearchIndexDemo.html">Elasticsearch Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/FaissIndexDemo.html">Faiss Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/MongoDBAtlasVectorSearch.html">MongoDB Atlas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/Neo4jVectorDemo.html">Neo4j vector store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/OpensearchDemo.html">Opensearch Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/PineconeIndexDemo.html">Pinecone Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/PineconeIndexDemo-Hybrid.html">Pinecone Vector Store - Hybrid Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/PGVectoRsDemo.html">pgvecto.rs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/postgres.html">Postgres Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/RedisIndexDemo.html">Redis Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/RedisIndexDemo.html#query-the-data">Query the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/RedisIndexDemo.html#working-with-metadata">Working with Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/QdrantIndexDemo.html">Qdrant Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/RocksetIndexDemo.html">Rockset Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/SimpleIndexDemo.html">Simple Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/SupabaseVectorIndexDemo.html">Supabase Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/TairIndexDemo.html">Tair Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/TencentVectorDBIndexDemo.html">Tencent Cloud VectorDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/Timescalevector.html">Timescale Vector Store (PostgreSQL)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/WeaviateIndexDemo.html">Weaviate Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/WeaviateIndexDemo-Hybrid.html">Weaviate Vector Store - Hybrid Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/ZepIndexDemo.html">Zep Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/ZepIndexDemo.html#create-a-zep-vector-store-and-index">Create a Zep Vector Store and Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/ZepIndexDemo.html#querying-with-metadata-filters">Querying with Metadata filters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/storing/docstores.html">Document Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/storing/index_stores.html">Index Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/storing/kv_stores.html">Key-Value Stores</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../community/integrations/graph_stores.html">Using Graph Stores</a><input class="toctree-checkbox" id="toctree-checkbox-52" name="toctree-checkbox-52" role="switch" type="checkbox"/><label for="toctree-checkbox-52"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/knowledge_graph/Neo4jKGIndexDemo.html">Neo4j Graph Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/knowledge_graph/NebulaGraphKGIndexDemo.html">Nebula Graph Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_engine/knowledge_graph_query_engine.html">Knowledge Graph Query Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/knowledge_graph/KuzuGraphDemo.html">Kuzu Graph Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/knowledge_graph/FalkorDBGraphDemo.html">FalkorDB Graph Store</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../module_guides/querying/querying.html">Querying</a><input class="toctree-checkbox" id="toctree-checkbox-53" name="toctree-checkbox-53" role="switch" type="checkbox"/><label for="toctree-checkbox-53"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/deploying/query_engine/root.html">Query Engine</a><input class="toctree-checkbox" id="toctree-checkbox-54" name="toctree-checkbox-54" role="switch" type="checkbox"/><label for="toctree-checkbox-54"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/deploying/query_engine/usage_pattern.html">Usage Pattern</a><input class="toctree-checkbox" id="toctree-checkbox-55" name="toctree-checkbox-55" role="switch" type="checkbox"/><label for="toctree-checkbox-55"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../module_guides/deploying/query_engine/response_modes.html">Response Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../module_guides/deploying/query_engine/streaming.html">Streaming</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/deploying/query_engine/modules.html">Module Guides</a><input class="toctree-checkbox" id="toctree-checkbox-56" name="toctree-checkbox-56" role="switch" type="checkbox"/><label for="toctree-checkbox-56"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/custom_query_engine.html">Custom Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/CustomRetrievers.html">Retriever Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../index_structs/struct_indices/SQLIndexDemo.html">Text-to-SQL Guide (Query Engine + Retriever)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/json_query_engine.html">JSON Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/pandas_query_engine.html">Pandas Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/knowledge_graph_query_engine.html">Knowledge Graph Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/knowledge_graph_rag_query_engine.html">Knowledge Graph RAG Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/RouterQueryEngine.html">Router Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/RetrieverRouterQueryEngine.html">Retriever Router Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/JointQASummary.html">Joint QA Summary Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/sub_question_query_engine.html">Sub Question Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_transformations/SimpleIndexDemo-multistep.html">Multi-Step Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/SQLRouterQueryEngine.html">SQL Router Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/SQLAutoVectorQueryEngine.html">SQL Auto Vector Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/SQLJoinQueryEngine.html">SQL Join Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/pgvector_sql_query_engine.html">[Beta] Text-to-SQL with PGVector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../index_structs/struct_indices/duckdb_sql_query.html">SQL Query Engine with LlamaIndex + DuckDB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../evaluation/RetryQuery.html">Retry Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/citation_query_engine.html">CitationQueryEngine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/pdf_tables/recursive_retriever.html">Recursive Retriever + Query Engine Demo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/sec_tables/tesla_10q_table.html">Joint Tabular/Semantic QA over Tesla 10K</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/recursive_retriever_agents.html">Recursive Retriever + Document Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/ensemble_query_engine.html">Ensemble Query Engine Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/sub_question_query_engine.html">Sub Question Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/recursive_retriever_agents.html">Recursive Retriever + Document Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/multi_document_agents.html">Multi-Document Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/multi_document_agents-v1.html">Multi-Document Agents (V1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/flare_query_engine.html">FLARE Query Engine</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/deploying/query_engine/supporting_modules.html">Supporting Modules</a><input class="toctree-checkbox" id="toctree-checkbox-57" name="toctree-checkbox-57" role="switch" type="checkbox"/><label for="toctree-checkbox-57"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../../../optimizing/advanced_retrieval/query_transformations.html">Query Transformations</a><input class="toctree-checkbox" id="toctree-checkbox-58" name="toctree-checkbox-58" role="switch" type="checkbox"/><label for="toctree-checkbox-58"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../query_transformations/HyDEQueryTransformDemo.html">HyDE Query Transform</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../query_transformations/SimpleIndexDemo-multistep.html">Multi-Step Query Engine</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/deploying/chat_engines/root.html">Chat Engine</a><input class="toctree-checkbox" id="toctree-checkbox-59" name="toctree-checkbox-59" role="switch" type="checkbox"/><label for="toctree-checkbox-59"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/deploying/chat_engines/usage_pattern.html">Usage Pattern</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/deploying/chat_engines/modules.html">Module Guides</a><input class="toctree-checkbox" id="toctree-checkbox-60" name="toctree-checkbox-60" role="switch" type="checkbox"/><label for="toctree-checkbox-60"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../chat_engine/chat_engine_react.html">ReAct Chat Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../chat_engine/chat_engine_openai.html">OpenAI Chat Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../chat_engine/chat_engine_condense_question.html">Condense Question Chat Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../chat_engine/chat_engine_context.html">Context Chat Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../chat_engine/chat_engine_condense_plus_context.html">Context Plus Condense Chat Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../chat_engine/chat_engine_repl.html">Simple Chat Engine</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/deploying/agents/root.html">Data Agents</a><input class="toctree-checkbox" id="toctree-checkbox-61" name="toctree-checkbox-61" role="switch" type="checkbox"/><label for="toctree-checkbox-61"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/deploying/agents/usage_pattern.html">Usage Pattern</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/deploying/agents/modules.html">Module Guides</a><input class="toctree-checkbox" id="toctree-checkbox-62" name="toctree-checkbox-62" role="switch" type="checkbox"/><label for="toctree-checkbox-62"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/openai_agent.html">Build your own OpenAI Agent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/openai_agent_with_query_engine.html">OpenAI Agent with Query Engine Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/openai_agent_retrieval.html">Retrieval-Augmented OpenAI Agent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/openai_agent_query_cookbook.html">OpenAI Agent + Query Engine Experimental Cookbook</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/openai_agent_query_plan.html">OpenAI Agent Query Planning</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/openai_agent_context_retrieval.html">Context-Augmented OpenAI Agent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/recursive_retriever_agents.html">Recursive Retriever + Document Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/multi_document_agents.html">Multi-Document Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/agent_builder.html">GPT Builder Demo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/openai_agent_parallel_function_calling.html">Single-Turn Multi-Function Calling OpenAI Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/openai_assistant_agent.html">OpenAI Assistant Agent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/openai_retrieval_benchmark.html">Benchmarking OpenAI Retrieval API (through Assistant Agent)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/openai_assistant_query_cookbook.html">OpenAI Assistant Advanced Retrieval Cookbook</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../agent/react_agent_with_query_engine.html">ReAct Agent with Query Engine Tools</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/deploying/agents/tools/root.html">Tools</a><input class="toctree-checkbox" id="toctree-checkbox-63" name="toctree-checkbox-63" role="switch" type="checkbox"/><label for="toctree-checkbox-63"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../module_guides/deploying/agents/tools/usage_pattern.html">Usage Pattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../module_guides/deploying/agents/tools/llamahub_tools_guide.html">LlamaHub Tools Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/querying/retriever/root.html">Retriever</a><input class="toctree-checkbox" id="toctree-checkbox-64" name="toctree-checkbox-64" role="switch" type="checkbox"/><label for="toctree-checkbox-64"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/querying/retriever/retriever_modes.html">Retriever Modes</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/querying/retriever/retrievers.html">Retriever Modules</a><input class="toctree-checkbox" id="toctree-checkbox-65" name="toctree-checkbox-65" role="switch" type="checkbox"/><label for="toctree-checkbox-65"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/CustomRetrievers.html">Define Custom Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../retrievers/bm25_retriever.html">BM25 Hybrid Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../retrievers/simple_fusion.html">Simple Fusion Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../retrievers/reciprocal_rerank_fusion.html">Reciprocal Rerank Fusion Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../index_structs/knowledge_graph/KnowledgeGraphIndex_vs_VectorStoreIndex_vs_CustomIndex_combined.html">Custom Retriever (KG Index and Vector Store Index)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/knowledge_graph_rag_query_engine.html">Knowledge Graph RAG Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../retrievers/simple_fusion.html">Simple Fusion Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../retrievers/reciprocal_rerank_fusion.html">Reciprocal Rerank Fusion Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../vector_stores/chroma_auto_retriever.html">Auto-Retrieval (with Chroma)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../vector_stores/BagelAutoRetriever.html">Auto-Retrieval (with BagelDB)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../query_engine/pdf_tables/recursive_retriever.html">Recursive Retriever + Query Engine Demo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../retrievers/router_retriever.html">Router Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../retrievers/ensemble_retrieval.html">Ensemble Retrieval Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../retrievers/auto_merging_retriever.html">Auto Merging Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../retrievers/recursive_retriever_nodes.html">Recursive Retriever + Node References</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../retrievers/recurisve_retriever_nodes_braintrust.html">Recursive Retriever + Node References + Braintrust</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../node_postprocessor/MetadataReplacementDemo.html">Metadata Replacement + Node Sentence Window</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../index_structs/struct_indices/SQLIndexDemo.html">Text-to-SQL Guide (Query Engine + Retriever)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../retrievers/deep_memory.html">DeepMemory (Activeloop)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/querying/response_synthesizers/root.html">Response Synthesizer</a><input class="toctree-checkbox" id="toctree-checkbox-66" name="toctree-checkbox-66" role="switch" type="checkbox"/><label for="toctree-checkbox-66"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/querying/response_synthesizers/response_synthesizers.html">Response Synthesis Modules</a><input class="toctree-checkbox" id="toctree-checkbox-67" name="toctree-checkbox-67" role="switch" type="checkbox"/><label for="toctree-checkbox-67"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../response_synthesizers/refine.html">Refine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../response_synthesizers/structured_refine.html">Refine with Structured Answer Filtering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../response_synthesizers/tree_summarize.html">Tree Summarize</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../response_synthesizers/custom_prompt_synthesizer.html">Pydantic Tree Summarize</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/querying/router/root.html">Routers</a><input class="toctree-checkbox" id="toctree-checkbox-68" name="toctree-checkbox-68" role="switch" type="checkbox"/><label for="toctree-checkbox-68"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../query_engine/RouterQueryEngine.html">Router Query Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_engine/RetrieverRouterQueryEngine.html">Retriever Router Query Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_engine/SQLRouterQueryEngine.html">SQL Router Query Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../retrievers/router_retriever.html">Router Retriever</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/querying/node_postprocessors/root.html">Node Postprocessor</a><input class="toctree-checkbox" id="toctree-checkbox-69" name="toctree-checkbox-69" role="switch" type="checkbox"/><label for="toctree-checkbox-69"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/querying/node_postprocessors/node_postprocessors.html">Node Postprocessor Modules</a><input class="toctree-checkbox" id="toctree-checkbox-70" name="toctree-checkbox-70" role="switch" type="checkbox"/><label for="toctree-checkbox-70"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../node_postprocessor/OptimizerDemo.html">Sentence Embedding Optimizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../node_postprocessor/CohereRerank.html">Cohere Rerank</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../node_postprocessor/LLMReranker-Lyft-10k.html">LLM Reranker Demonstration (2021 Lyft 10-k)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../node_postprocessor/LLMReranker-Gatsby.html">LLM Reranker Demonstration (Great Gatsby)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../node_postprocessor/RecencyPostprocessorDemo.html">Recency Filtering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../node_postprocessor/TimeWeightedPostprocessorDemo.html">Time-Weighted Rerank</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../node_postprocessor/PII.html">PII Masking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../node_postprocessor/PrevNextPostprocessorDemo.html">Forward/Backward Augmentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../node_postprocessor/MetadataReplacementDemo.html">Metadata Replacement + Node Sentence Window</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../node_postprocessor/LongContextReorder.html">LongContextReorder</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/querying/output_parser.html">Output Parsing Modules</a><input class="toctree-checkbox" id="toctree-checkbox-71" name="toctree-checkbox-71" role="switch" type="checkbox"/><label for="toctree-checkbox-71"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../output_parsing/GuardrailsDemo.html">Guardrails Output Parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../output_parsing/LangchainOutputParserDemo.html">Langchain Output Parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../output_parsing/guidance_pydantic_program.html">Guidance Pydantic Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../output_parsing/guidance_sub_question.html">Guidance for Sub-Question Query Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../output_parsing/openai_pydantic_program.html">OpenAI Pydantic Program</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../module_guides/observability/observability.html">Observability</a><input class="toctree-checkbox" id="toctree-checkbox-72" name="toctree-checkbox-72" role="switch" type="checkbox"/><label for="toctree-checkbox-72"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../callbacks/WandbCallbackHandler.html">Wandb Callback Handler</a></li>
<li class="toctree-l2"><a class="reference external" href="https://colab.research.google.com/github/Arize-ai/phoenix/blob/main/tutorials/tracing/llama_index_tracing_tutorial.ipynb">Arize Phoenix Tracing Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../callbacks/OpenInferenceCallback.html">OpenInference Callback Handler + Arize Phoenix</a></li>
<li class="toctree-l2"><a class="reference external" href="https://colab.research.google.com/github/Arize-ai/phoenix/blob/main/tutorials/llama_index_search_and_retrieval_tutorial.ipynb">Evaluating Search and Retrieval with Arize Phoenix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/integrations/trulens.html">Evaluating and Tracking with TruLens</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/truera/trulens/blob/main/trulens_eval/examples/frameworks/llama_index/llama_index_quickstart.ipynb">Quickstart Guide with LlamaIndex + TruLens</a></li>
<li class="toctree-l2"><a class="reference external" href="https://colab.research.google.com/github/truera/trulens/blob/main/trulens_eval/examples/frameworks/llama_index/llama_index_quickstart.ipynb">Colab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../callbacks/HoneyHiveLlamaIndexTracer.html">HoneyHive LlamaIndex Tracer</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/observability/callbacks/root.html">Callbacks</a><input class="toctree-checkbox" id="toctree-checkbox-73" name="toctree-checkbox-73" role="switch" type="checkbox"/><label for="toctree-checkbox-73"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../callbacks/TokenCountingHandler.html">Token Counting Handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../callbacks/LlamaDebugHandler.html">Llama Debug Handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../callbacks/WandbCallbackHandler.html">Wandb Callback Handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../callbacks/AimCallback.html">Aim Callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../callbacks/OpenInferenceCallback.html">OpenInference Callback Handler + Arize Phoenix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../module_guides/observability/callbacks/token_counting_migration.html">Token Counting - Migration Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../module_guides/evaluating/root.html">Evaluating</a><input class="toctree-checkbox" id="toctree-checkbox-74" name="toctree-checkbox-74" role="switch" type="checkbox"/><label for="toctree-checkbox-74"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/evaluating/usage_pattern.html">Usage Pattern (Response Evaluation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/evaluating/usage_pattern_retrieval.html">Usage Pattern (Retrieval)</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/evaluating/modules.html">Modules</a><input class="toctree-checkbox" id="toctree-checkbox-75" name="toctree-checkbox-75" role="switch" type="checkbox"/><label for="toctree-checkbox-75"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/faithfulness_eval.html">Faithfulness Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/relevancy_eval.html">Relevancy Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/guideline_eval.html">Guideline Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/correctness_eval.html">Correctness Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/semantic_similarity_eval.html">Embedding Similarity Evaluator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/Deepeval.html">LlamaIndex + DeepEval Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/QuestionGeneration.html">QuestionGeneration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/batch_eval.html">BatchEvalRunner - Running Multiple Evaluations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/multi_modal/multi_modal_rag_evaluation.html">Evaluating Multi-Modal RAG</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../evaluation/retrieval/retriever_eval.html">Retrieval Evaluation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../module_guides/supporting_modules/supporting_modules.html">Supporting Modules</a><input class="toctree-checkbox" id="toctree-checkbox-76" name="toctree-checkbox-76" role="switch" type="checkbox"/><label for="toctree-checkbox-76"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../module_guides/supporting_modules/service_context.html">ServiceContext</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../api_reference/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-77" name="toctree-checkbox-77" role="switch" type="checkbox"/><label for="toctree-checkbox-77"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/callbacks.html">Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/composability.html">Composability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/evaluation.html">Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/example_notebooks.html">Example Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/finetuning.html">Finetuning</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api_reference/indices.html">Indices</a><input class="toctree-checkbox" id="toctree-checkbox-78" name="toctree-checkbox-78" role="switch" type="checkbox"/><label for="toctree-checkbox-78"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/indices/list.html">Summary Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/indices/table.html">Table Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/indices/tree.html">Tree Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/indices/vector_store.html">Vector Store Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/indices/struct_store.html">Structured Store Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/indices/kg.html">Knowledge Graph Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/indices/empty.html">Empty Index</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/llm_predictor.html">LLM Predictors</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api_reference/llms.html">LLMs</a><input class="toctree-checkbox" id="toctree-checkbox-79" name="toctree-checkbox-79" role="switch" type="checkbox"/><label for="toctree-checkbox-79"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/openai.html">OpenAI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/azure_openai.html">Azure OpenAI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/huggingface.html">HuggingFaceLLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/langchain.html">LangChainLLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/anthropic.html">Anthropic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/gradient_base_model.html">Gradient Base Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/gradient_model_adapter.html">Gradient Model Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/litellm.html">LiteLLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/llama_cpp.html">LlamaCPP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/palm.html">PaLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/predibase.html">Predibase</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/replicate.html">Replicate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/xinference.html">XOrbits Xinference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/llms/openllm.html">OpenLLM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/memory.html">Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/node_postprocessor.html">Node Postprocessor</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api_reference/node.html">Node</a><input class="toctree-checkbox" id="toctree-checkbox-80" name="toctree-checkbox-80" role="switch" type="checkbox"/><label for="toctree-checkbox-80"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.BaseComponent.html">BaseComponent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.BaseNode.html">BaseNode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.Document.html">Document</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.ImageDocument.html">ImageDocument</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.ImageNode.html">ImageNode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.IndexNode.html">IndexNode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.MetadataMode.html">MetadataMode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.Node.html">Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.NodeRelationship.html">NodeRelationship</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.NodeWithScore.html">NodeWithScore</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.ObjectType.html">ObjectType</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.QueryBundle.html">QueryBundle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.RelatedNodeInfo.html">RelatedNodeInfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.TextNode.html">TextNode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.schema.TransformComponent.html">TransformComponent</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/playground.html">Playground</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/prompts.html">Prompt Templates</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api_reference/query.html">Querying an Index</a><input class="toctree-checkbox" id="toctree-checkbox-81" name="toctree-checkbox-81" role="switch" type="checkbox"/><label for="toctree-checkbox-81"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../api_reference/query/retrievers.html">Retrievers</a><input class="toctree-checkbox" id="toctree-checkbox-82" name="toctree-checkbox-82" role="switch" type="checkbox"/><label for="toctree-checkbox-82"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/retrievers/empty.html">Empty Index Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/retrievers/kg.html">Knowledge Graph Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/retrievers/list.html">List Retriever</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/retrievers/table.html">Keyword Table Retrievers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/retrievers/tree.html">Tree Retrievers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/retrievers/vector_store.html">Vector Store Retrievers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/retrievers/transform.html">Transform Retriever</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/query/response_synthesizer.html">Response Synthesizer</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../api_reference/query/query_engines.html">Query Engines</a><input class="toctree-checkbox" id="toctree-checkbox-83" name="toctree-checkbox-83" role="switch" type="checkbox"/><label for="toctree-checkbox-83"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/graph_query_engine.html">Graph Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/multistep_query_engine.html">Multistep Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/retriever_query_engine.html">Retriever Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/transform_query_engine.html">Transform Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/router_query_engine.html">Router Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/retriever_router_query_engine.html">Retriever Router Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/sub_question_query_engine.html">Sub Question Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/sql_join_query_engine.html">SQL Join Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/flare_query_engine.html">Flare Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/citation_query_engine.html">Citation Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/knowledge_graph_query_engine.html">Knowledge Graph Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/sql_query_engine.html">SQL Query Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/query_engines/pandas_query_engine.html">Pandas Query Engine</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../api_reference/query/chat_engines.html">Chat Engines</a><input class="toctree-checkbox" id="toctree-checkbox-84" name="toctree-checkbox-84" role="switch" type="checkbox"/><label for="toctree-checkbox-84"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/chat_engines/simple_chat_engine.html">Simple Chat Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/chat_engines/condense_question_chat_engine.html">Condense Question Chat Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/query/chat_engines/condense_plus_context_chat_engine.html">Condense Plus Context Chat Engine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/query/query_bundle.html">Query Bundle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/query/query_transform.html">Query Transform</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api_reference/readers.html">Data Connectors</a><input class="toctree-checkbox" id="toctree-checkbox-85" name="toctree-checkbox-85" role="switch" type="checkbox"/><label for="toctree-checkbox-85"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.download_loader.html">download_loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.WikipediaReader.html">WikipediaReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.YoutubeTranscriptReader.html">YoutubeTranscriptReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.SimpleDirectoryReader.html">SimpleDirectoryReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.JSONReader.html">JSONReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.SimpleMongoReader.html">SimpleMongoReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.NotionPageReader.html">NotionPageReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.GoogleDocsReader.html">GoogleDocsReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.MetalReader.html">MetalReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.DiscordReader.html">DiscordReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.SlackReader.html">SlackReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.WeaviateReader.html">WeaviateReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.PineconeReader.html">PineconeReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.PsychicReader.html">PsychicReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.QdrantReader.html">QdrantReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.MilvusReader.html">MilvusReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.ChromaReader.html">ChromaReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.DeepLakeReader.html">DeepLakeReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.FaissReader.html">FaissReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.MyScaleReader.html">MyScaleReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.StringIterableReader.html">StringIterableReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.SimpleWebPageReader.html">SimpleWebPageReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.BeautifulSoupWebReader.html">BeautifulSoupWebReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.TrafilaturaWebReader.html">TrafilaturaWebReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.RssReader.html">RssReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.MakeWrapper.html">MakeWrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.TwitterTweetReader.html">TwitterTweetReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.ObsidianReader.html">ObsidianReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.GithubRepositoryReader.html">GithubRepositoryReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.MboxReader.html">MboxReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.ElasticsearchReader.html">ElasticsearchReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.SteamshipFileReader.html">SteamshipFileReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.ChatGPTRetrievalPluginReader.html">ChatGPTRetrievalPluginReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.BagelReader.html">BagelReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.HTMLTagReader.html">HTMLTagReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.ReaderConfig.html">ReaderConfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.PDFReader.html">PDFReader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/llama_index.readers.DashVectorReader.html">DashVectorReader</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/response.html">Response</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api_reference/service_context.html">Service Context</a><input class="toctree-checkbox" id="toctree-checkbox-86" name="toctree-checkbox-86" role="switch" type="checkbox"/><label for="toctree-checkbox-86"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html">Embeddings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#openaiembedding">OpenAIEmbedding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#huggingfaceembedding">HuggingFaceEmbedding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#optimumembedding">OptimumEmbedding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#instructorembedding">InstructorEmbedding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#langchainembedding">LangchainEmbedding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#googleunivsentencoderembedding">GoogleUnivSentEncoderEmbedding</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../api_reference/service_context/node_parser.html">Node Parser</a><input class="toctree-checkbox" id="toctree-checkbox-87" name="toctree-checkbox-87" role="switch" type="checkbox"/><label for="toctree-checkbox-87"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.get_leaf_nodes.html">get_leaf_nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.get_root_nodes.html">get_root_nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.TokenTextSplitter.html">TokenTextSplitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.SentenceSplitter.html">SentenceSplitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.CodeSplitter.html">CodeSplitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.SimpleFileNodeParser.html">SimpleFileNodeParser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.HTMLNodeParser.html">HTMLNodeParser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.MarkdownNodeParser.html">MarkdownNodeParser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.JSONNodeParser.html">JSONNodeParser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.SentenceWindowNodeParser.html">SentenceWindowNodeParser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.NodeParser.html">NodeParser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.HierarchicalNodeParser.html">HierarchicalNodeParser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.TextSplitter.html">TextSplitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.MetadataAwareTextSplitter.html">MetadataAwareTextSplitter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.LangchainNodeParser.html">LangchainNodeParser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.UnstructuredElementNodeParser.html">UnstructuredElementNodeParser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.node_parser.SimpleNodeParser.html">SimpleNodeParser</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/service_context/prompt_helper.html">PromptHelper</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../api_reference/llms.html">LLMs</a><input class="toctree-checkbox" id="toctree-checkbox-88" name="toctree-checkbox-88" role="switch" type="checkbox"/><label for="toctree-checkbox-88"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/openai.html">OpenAI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/azure_openai.html">Azure OpenAI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/huggingface.html">HuggingFaceLLM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/langchain.html">LangChainLLM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/anthropic.html">Anthropic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/gradient_base_model.html">Gradient Base Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/gradient_model_adapter.html">Gradient Model Adapter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/litellm.html">LiteLLM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/llama_cpp.html">LlamaCPP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/palm.html">PaLM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/predibase.html">Predibase</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/replicate.html">Replicate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/xinference.html">XOrbits Xinference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api_reference/llms/openllm.html">OpenLLM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html">Embeddings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#openaiembedding">OpenAIEmbedding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#huggingfaceembedding">HuggingFaceEmbedding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#optimumembedding">OptimumEmbedding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#instructorembedding">InstructorEmbedding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#langchainembedding">LangchainEmbedding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/service_context/embeddings.html#googleunivsentencoderembedding">GoogleUnivSentEncoderEmbedding</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../api_reference/storage.html">Storage Context</a><input class="toctree-checkbox" id="toctree-checkbox-89" name="toctree-checkbox-89" role="switch" type="checkbox"/><label for="toctree-checkbox-89"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/storage/docstore.html">Document Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/storage/index_store.html">Index Store</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../api_reference/storage/vector_store.html">Vector Store</a><input class="toctree-checkbox" id="toctree-checkbox-90" name="toctree-checkbox-90" role="switch" type="checkbox"/><label for="toctree-checkbox-90"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.ElasticsearchStore.html">ElasticsearchStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.SimpleVectorStore.html">SimpleVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.RedisVectorStore.html">RedisVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.RocksetVectorStore.html">RocksetVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.FaissVectorStore.html">FaissVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.PineconeVectorStore.html">PineconeVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.WeaviateVectorStore.html">WeaviateVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.QdrantVectorStore.html">QdrantVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.CassandraVectorStore.html">CassandraVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.ChromaVectorStore.html">ChromaVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.MetalVectorStore.html">MetalVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.OpensearchVectorStore.html">OpensearchVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.OpensearchVectorClient.html">OpensearchVectorClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.ChatGPTRetrievalPluginClient.html">ChatGPTRetrievalPluginClient</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.MilvusVectorStore.html">MilvusVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.DeepLakeVectorStore.html">DeepLakeVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.MyScaleVectorStore.html">MyScaleVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.LanceDBVectorStore.html">LanceDBVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.TairVectorStore.html">TairVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.DocArrayInMemoryVectorStore.html">DocArrayInMemoryVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.DocArrayHnswVectorStore.html">DocArrayHnswVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.SupabaseVectorStore.html">SupabaseVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.PGVectorStore.html">PGVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.PGVectoRsStore.html">PGVectoRsStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.TimescaleVectorStore.html">TimescaleVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.ZepVectorStore.html">ZepVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.AwaDBVectorStore.html">AwaDBVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.BagelVectorStore.html">BagelVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.Neo4jVectorStore.html">Neo4jVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.CognitiveSearchVectorStore.html">CognitiveSearchVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.EpsillaVectorStore.html">EpsillaVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.SingleStoreVectorStore.html">SingleStoreVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.VectorStoreQuery.html">VectorStoreQuery</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.VectorStoreQueryResult.html">VectorStoreQueryResult</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.MetadataFilters.html">MetadataFilters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.DashVectorStore.html">DashVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.TencentVectorDB.html">TencentVectorDB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.AstraDBVectorStore.html">AstraDBVectorStore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.AzureCosmosDBMongoDBVectorSearch.html">AzureCosmosDBMongoDBVectorSearch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/llama_index.vector_stores.LanternVectorStore.html">LanternVectorStore</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/storage/kv_store.html">KV Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api_reference/storage/indices_save_load.html">Loading Indices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../api_reference/struct_store.html">Structured Index Configuration</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../community/integrations.html">Integrations</a><input class="toctree-checkbox" id="toctree-checkbox-91" name="toctree-checkbox-91" role="switch" type="checkbox"/><label for="toctree-checkbox-91"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../community/llama_packs/root.html">Llama Packs 🦙📦</a><input class="toctree-checkbox" id="toctree-checkbox-92" name="toctree-checkbox-92" role="switch" type="checkbox"/><label for="toctree-checkbox-92"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../llama_hub/llama_packs_example.html">Llama Packs Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../llama_hub/llama_pack_resume.html">Llama Pack - Resume Screener 📄</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../module_guides/observability/observability.html">Observability</a><input class="toctree-checkbox" id="toctree-checkbox-93" name="toctree-checkbox-93" role="switch" type="checkbox"/><label for="toctree-checkbox-93"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../callbacks/WandbCallbackHandler.html">Wandb Callback Handler</a></li>
<li class="toctree-l3"><a class="reference external" href="https://colab.research.google.com/github/Arize-ai/phoenix/blob/main/tutorials/tracing/llama_index_tracing_tutorial.ipynb">Arize Phoenix Tracing Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../callbacks/OpenInferenceCallback.html">OpenInference Callback Handler + Arize Phoenix</a></li>
<li class="toctree-l3"><a class="reference external" href="https://colab.research.google.com/github/Arize-ai/phoenix/blob/main/tutorials/llama_index_search_and_retrieval_tutorial.ipynb">Evaluating Search and Retrieval with Arize Phoenix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../community/integrations/trulens.html">Evaluating and Tracking with TruLens</a></li>
<li class="toctree-l3"><a class="reference external" href="https://github.com/truera/trulens/blob/main/trulens_eval/examples/frameworks/llama_index/llama_index_quickstart.ipynb">Quickstart Guide with LlamaIndex + TruLens</a></li>
<li class="toctree-l3"><a class="reference external" href="https://colab.research.google.com/github/truera/trulens/blob/main/trulens_eval/examples/frameworks/llama_index/llama_index_quickstart.ipynb">Colab</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../callbacks/HoneyHiveLlamaIndexTracer.html">HoneyHive LlamaIndex Tracer</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../../module_guides/observability/callbacks/root.html">Callbacks</a><input class="toctree-checkbox" id="toctree-checkbox-94" name="toctree-checkbox-94" role="switch" type="checkbox"/><label for="toctree-checkbox-94"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../callbacks/TokenCountingHandler.html">Token Counting Handler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../callbacks/LlamaDebugHandler.html">Llama Debug Handler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../callbacks/WandbCallbackHandler.html">Wandb Callback Handler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../callbacks/AimCallback.html">Aim Callback</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../callbacks/OpenInferenceCallback.html">OpenInference Callback Handler + Arize Phoenix</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../module_guides/observability/callbacks/token_counting_migration.html">Token Counting - Migration Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/integrations/graphsignal.html">Tracing with Graphsignal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/integrations/trulens.html">Evaluating and Tracking with TruLens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/integrations/deepeval.html">Unit Testing LLMs With DeepEval</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/integrations/guidance.html">Guidance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/integrations/lmformatenforcer.html">LM Format Enforcer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../output_parsing/GuardrailsDemo.html">Guardrails</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../output_parsing/openai_pydantic_program.html">OpenAI Function Calling</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../community/integrations/vector_stores.html">Using Vector Stores</a><input class="toctree-checkbox" id="toctree-checkbox-95" name="toctree-checkbox-95" role="switch" type="checkbox"/><label for="toctree-checkbox-95"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/AstraDBIndexDemo.html">Astra DB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/AsyncIndexCreationDemo.html">Simple Vector Store - Async Index Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/AzureCosmosDBMongoDBvCoreDemo.html">Azure CosmosDB MongoDB Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CassandraIndexDemo.html">Cassandra Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/ChromaIndexDemo.html">Chroma</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html">Azure Cognitive Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html#basic-example">Basic Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html#create-index-if-it-does-not-exist">Create Index (if it does not exist)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html#use-existing-index">Use Existing Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html#adding-a-document-to-existing-index">Adding a document to existing index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/CognitiveSearchIndexDemo.html#filtering">Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/DashvectorIndexDemo.html">DashVector Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/DeepLakeIndexDemo.html">DeepLake Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/DocArrayHnswIndexDemo.html">DocArray Hnsw Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/DocArrayInMemoryIndexDemo.html">DocArray InMemory Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/EpsillaIndexDemo.html">Epsilla Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/LanceDBIndexDemo.html">LanceDB Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/MetalIndexDemo.html">Metal Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/MilvusIndexDemo.html">Milvus Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/MyScaleIndexDemo.html">MyScale Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/ElasticsearchIndexDemo.html">Elasticsearch Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/FaissIndexDemo.html">Faiss Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/MongoDBAtlasVectorSearch.html">MongoDB Atlas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/Neo4jVectorDemo.html">Neo4j vector store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/OpensearchDemo.html">Opensearch Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/PineconeIndexDemo.html">Pinecone Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/PineconeIndexDemo-Hybrid.html">Pinecone Vector Store - Hybrid Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/PGVectoRsDemo.html">pgvecto.rs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/postgres.html">Postgres Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/RedisIndexDemo.html">Redis Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/RedisIndexDemo.html#query-the-data">Query the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/RedisIndexDemo.html#working-with-metadata">Working with Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/QdrantIndexDemo.html">Qdrant Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/RocksetIndexDemo.html">Rockset Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/SimpleIndexDemo.html">Simple Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/SupabaseVectorIndexDemo.html">Supabase Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/TairIndexDemo.html">Tair Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/TencentVectorDBIndexDemo.html">Tencent Cloud VectorDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/Timescalevector.html">Timescale Vector Store (PostgreSQL)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/WeaviateIndexDemo.html">Weaviate Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/WeaviateIndexDemo-Hybrid.html">Weaviate Vector Store - Hybrid Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/ZepIndexDemo.html">Zep Vector Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/ZepIndexDemo.html#create-a-zep-vector-store-and-index">Create a Zep Vector Store and Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../vector_stores/ZepIndexDemo.html#querying-with-metadata-filters">Querying with Metadata filters</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../community/integrations/graph_stores.html">Using Graph Stores</a><input class="toctree-checkbox" id="toctree-checkbox-96" name="toctree-checkbox-96" role="switch" type="checkbox"/><label for="toctree-checkbox-96"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/knowledge_graph/Neo4jKGIndexDemo.html">Neo4j Graph Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/knowledge_graph/NebulaGraphKGIndexDemo.html">Nebula Graph Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../query_engine/knowledge_graph_query_engine.html">Knowledge Graph Query Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/knowledge_graph/KuzuGraphDemo.html">Kuzu Graph Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../index_structs/knowledge_graph/FalkorDBGraphDemo.html">FalkorDB Graph Store</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../../community/integrations/managed_indices.html">Using Managed Indices</a><input class="toctree-checkbox" id="toctree-checkbox-97" name="toctree-checkbox-97" role="switch" type="checkbox"/><label for="toctree-checkbox-97"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../managed/vectaraDemo.html">Vectara Managed Index</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/integrations/using_with_langchain.html">Using with Langchain 🦜🔗</a></li>
<li class="toctree-l2"><a class="reference external" href="https://blog.streamlit.io/build-a-chatbot-with-custom-data-sources-powered-by-llamaindex/">Streamlit</a></li>
<li class="toctree-l2"><a class="reference external" href="https://docs.chainlit.io/integrations/llama-index">Chainlit</a></li>
<li class="toctree-l2"><a class="reference external" href="https://www.anyscale.com/blog/build-and-scale-a-powerful-query-engine-with-llamaindex-ray">LlamaIndex + Ray</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/integrations/chatgpt_plugins.html">ChatGPT Plugin Integrations</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/poe-platform/poe-protocol/tree/main/llama_poe">Poe</a></li>
<li class="toctree-l2"><a class="reference external" href="https://airbyte.com/tutorials/airbyte-and-llamaindex-elt-and-chat-with-your-data-warehouse-without-writing-sql">Airbyte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/integrations/fleet_libraries_context.html">Fleet Context Embeddings - Building a Hybrid Search Engine for the Llamaindex Library</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../community/frequently_asked_questions.html">Frequently Asked Questions (FAQ)</a><input class="toctree-checkbox" id="toctree-checkbox-98" name="toctree-checkbox-98" role="switch" type="checkbox"/><label for="toctree-checkbox-98"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/faq/llms.html">Large Language Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/faq/embeddings.html">Embeddings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/faq/vector_database.html">Vector Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/faq/query_engines.html">Query Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/faq/chat_engines.html">Chat Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../community/faq/documents_and_nodes.html">Documents and Nodes</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/contributing.html">Contributing to LlamaIndex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/documentation.html">Documentation Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../changes/changelog.html">ChangeLog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changes/deprecated_terms.html">Deprecated Terms</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="knowledge-distillation-for-fine-tuning-a-gpt-3-5-judge-pairwise">
<h1>Knowledge Distillation For Fine-Tuning A GPT-3.5 Judge (Pairwise)<a class="headerlink" href="#knowledge-distillation-for-fine-tuning-a-gpt-3-5-judge-pairwise" title="Permalink to this heading"></a></h1>
<p>There has been recent research that demonstrated GPT-4’s ability to closely align to human judges when evaluating LLM generated texts (e.g., see <a class="reference external" href="https://arxiv.org/abs/2306.05685">[1]</a>, <a class="reference external" href="https://arxiv.org/abs/2303.16634">[2]</a>). In this notebook, we demonstrate how to use the <code class="docutils literal notranslate"><span class="pre">llama_index</span></code> library to distill knowledge from GPT-4 to GPT-3.5 so that a smaller GPT-3.5 becomes closer to GPT-4 performance; and by proxy, closer to human judges.</p>
<p>To do so, we will perform the following high level steps:</p>
<ol class="arabic simple">
<li><p>Generate datasets: <code class="docutils literal notranslate"><span class="pre">train_dataset</span></code> and <code class="docutils literal notranslate"><span class="pre">test_dataset</span></code></p></li>
<li><p>Perform knowledge distillation (using <code class="docutils literal notranslate"><span class="pre">train_dataset</span></code>)</p></li>
<li><p>Evaluate the distilled model  on <code class="docutils literal notranslate"><span class="pre">test_dataset</span></code></p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE: this notebook makes several API calls to generate text with OpenAI GPT</span>
<span class="c1"># models as well as models hosted on HuggingFace. If you prefer not to wait for</span>
<span class="c1"># these generations, then the data for this notebook can be obtained with the</span>
<span class="c1"># `wget` command provided below.</span>

<span class="c1"># !wget &quot;https://www.dropbox.com/scl/fo/m7skpjdbpb0g3p76y6epe/h?rlkey=omh2ysgh9qqqztf81qvjlivu2&amp;dl=1&quot; -O pairwise.zip</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nest_asyncio</span>

<span class="n">nest_asyncio</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># we will be using models on HuggingFace as our LLM answer generators</span>
<span class="n">HUGGING_FACE_TOKEN</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;HUGGING_FACE_TOKEN&quot;</span><span class="p">)</span>

<span class="c1"># we will use GPT-4 and GPT-3.5 + OpenAI Fine-Tuning</span>
<span class="n">OPENAI_API_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>


<span class="c1"># define jupyter display function</span>
<span class="k">def</span> <span class="nf">display_eval_df</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">answer_a</span><span class="p">,</span> <span class="n">answer_b</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pretty print question/answer + gpt-4 judgement dataset.&quot;&quot;&quot;</span>
    <span class="n">eval_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;Question&quot;</span><span class="p">:</span> <span class="n">question</span><span class="p">,</span>
            <span class="s2">&quot;Source&quot;</span><span class="p">:</span> <span class="n">source</span><span class="p">,</span>
            <span class="s2">&quot;Model A&quot;</span><span class="p">:</span> <span class="n">answer_a</span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">],</span>
            <span class="s2">&quot;Answer A&quot;</span><span class="p">:</span> <span class="n">answer_a</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
            <span class="s2">&quot;Model B&quot;</span><span class="p">:</span> <span class="n">answer_b</span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">],</span>
            <span class="s2">&quot;Answer B&quot;</span><span class="p">:</span> <span class="n">answer_b</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
            <span class="s2">&quot;Score&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">score</span><span class="p">,</span>
            <span class="s2">&quot;Judgement&quot;</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">feedback</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">eval_df</span> <span class="o">=</span> <span class="n">eval_df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_properties</span><span class="p">(</span>
        <span class="o">**</span><span class="p">{</span>
            <span class="s2">&quot;inline-size&quot;</span><span class="p">:</span> <span class="s2">&quot;300px&quot;</span><span class="p">,</span>
            <span class="s2">&quot;overflow-wrap&quot;</span><span class="p">:</span> <span class="s2">&quot;break-word&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Answer A&quot;</span><span class="p">,</span> <span class="s2">&quot;Answer B&quot;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">eval_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="step-1-generate-datasets-train-dataset-and-test-dataset">
<h2>Step 1 Generate datasets: <code class="docutils literal notranslate"><span class="pre">train_dataset</span></code> and <code class="docutils literal notranslate"><span class="pre">test_dataset</span></code><a class="headerlink" href="#step-1-generate-datasets-train-dataset-and-test-dataset" title="Permalink to this heading"></a></h2>
<p>For our dataset on which we will generate questions and prompt various LLMs to answer, we’re going to use the <code class="docutils literal notranslate"><span class="pre">WikipediaReader</span></code> to read “History of <city>” for several cities. We’re going to split up our cities into two lists: one to be used for <code class="docutils literal notranslate"><span class="pre">train_dataset</span></code> and the other for <code class="docutils literal notranslate"><span class="pre">test_dataset</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>wikipedia<span class="w"> </span>-q
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> A new release of pip is available: <span class=" -Color -Color-Red">23.2.1</span> -&gt; <span class=" -Color -Color-Green">23.3.1</span>
<span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> To update, run: <span class=" -Color -Color-Green">pip install --upgrade pip</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># wikipedia pages</span>
<span class="kn">from</span> <span class="nn">llama_index.readers</span> <span class="kn">import</span> <span class="n">WikipediaReader</span>

<span class="n">train_cities</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;San Francisco&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Toronto&quot;</span><span class="p">,</span>
    <span class="s2">&quot;New York&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Vancouver&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Montreal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Boston&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">test_cities</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Tokyo&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Singapore&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Paris&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">train_documents</span> <span class="o">=</span> <span class="n">WikipediaReader</span><span class="p">()</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span>
    <span class="n">pages</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;History of </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">train_cities</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">test_documents</span> <span class="o">=</span> <span class="n">WikipediaReader</span><span class="p">()</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span>
    <span class="n">pages</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;History of </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">test_cities</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="use-a-datasetgenerator-to-build-train-dataset-and-test-dataset">
<h3>Use a <code class="docutils literal notranslate"><span class="pre">DatasetGenerator</span></code> to build <code class="docutils literal notranslate"><span class="pre">train_dataset</span></code> and <code class="docutils literal notranslate"><span class="pre">test_dataset</span></code><a class="headerlink" href="#use-a-datasetgenerator-to-build-train-dataset-and-test-dataset" title="Permalink to this heading"></a></h3>
<p>Now that we have our train and test set of <code class="docutils literal notranslate"><span class="pre">Document</span></code>’s, the next step is to generate the questions. For this we will use the <code class="docutils literal notranslate"><span class="pre">DatasetGenerator</span></code>, which uses an LLM to generate questions from given set of documents.</p>
<div class="section" id="generate-questions">
<h4>Generate Questions<a class="headerlink" href="#generate-questions" title="Permalink to this heading"></a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">QUESTION_GEN_PROMPT</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;You are a Teacher/ Professor. Your task is to setup &quot;</span>
    <span class="s2">&quot;a quiz/examination. Using the provided context, formulate &quot;</span>
    <span class="s2">&quot;a single question that captures an important fact from the &quot;</span>
    <span class="s2">&quot;context. Restrict the question to the context information provided.&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>With all that out of the way, let’s spring into action. First, we will download the reference pdf document and create the set of questions against it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># generate questions against chunks</span>
<span class="kn">from</span> <span class="nn">llama_index.evaluation</span> <span class="kn">import</span> <span class="n">DatasetGenerator</span>
<span class="kn">from</span> <span class="nn">llama_index.llms</span> <span class="kn">import</span> <span class="n">OpenAI</span>
<span class="kn">from</span> <span class="nn">llama_index</span> <span class="kn">import</span> <span class="n">ServiceContext</span>

<span class="c1"># set context for llm provider</span>
<span class="n">gpt_35_context</span> <span class="o">=</span> <span class="n">ServiceContext</span><span class="o">.</span><span class="n">from_defaults</span><span class="p">(</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">OpenAI</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># instantiate DatasetGenerator&#39;s for train and test</span>
<span class="n">train_dataset_generator</span> <span class="o">=</span> <span class="n">DatasetGenerator</span><span class="o">.</span><span class="n">from_documents</span><span class="p">(</span>
    <span class="n">train_documents</span><span class="p">,</span>
    <span class="n">question_gen_query</span><span class="o">=</span><span class="n">QUESTION_GEN_PROMPT</span><span class="p">,</span>
    <span class="n">service_context</span><span class="o">=</span><span class="n">gpt_35_context</span><span class="p">,</span>
    <span class="n">show_progress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">num_questions_per_chunk</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">test_dataset_generator</span> <span class="o">=</span> <span class="n">DatasetGenerator</span><span class="o">.</span><span class="n">from_documents</span><span class="p">(</span>
    <span class="n">test_documents</span><span class="p">,</span>
    <span class="n">question_gen_query</span><span class="o">=</span><span class="n">QUESTION_GEN_PROMPT</span><span class="p">,</span>
    <span class="n">service_context</span><span class="o">=</span><span class="n">gpt_35_context</span><span class="p">,</span>
    <span class="n">show_progress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">num_questions_per_chunk</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># use DatasetGenerator to create questions from nodes</span>
<span class="n">train_questions</span> <span class="o">=</span> <span class="n">train_dataset_generator</span><span class="o">.</span><span class="n">generate_questions_from_nodes</span><span class="p">(</span>
    <span class="n">num</span><span class="o">=</span><span class="mi">200</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 75/75 [00:02&lt;00:00, 36.34it/s]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">test_questions</span> <span class="o">=</span> <span class="n">test_dataset_generator</span><span class="o">.</span><span class="n">generate_questions_from_nodes</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 64/64 [00:02&lt;00:00, 29.98it/s]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">train_questions</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_questions</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(75, 64)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s take a look at a few of these</span>
<span class="n">train_questions</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;What event in 1906 caused significant damage to San Francisco but was followed by a quick rebuild?&#39;,
 &#39;What was the name of the first significant homestead established outside the immediate vicinity of Mission Dolores in San Francisco?&#39;,
 &quot;What event in 1855 led to the establishment of San Francisco&#39;s first county hospital and the development of California&#39;s system of county hospitals for the poor?&quot;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">test_questions</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Question: What was the name of the oldest Buddhist temple in Tokyo, founded in 628?&#39;,
 &#39;What event marked the end of the samurai system and feudal class divisions in Tokyo?&#39;,
 &#39;Question: What role did the Tokyo Imperial University play in the Meiji Era?&#39;]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="generate-answers-to-the-questions">
<h4>Generate Answers To The Questions<a class="headerlink" href="#generate-answers-to-the-questions" title="Permalink to this heading"></a></h4>
<p>The next step is to generate answers using LLMs. Just a reminder, that the point is to judge these generated answers. So later on, we will use GPT models to judge these answers.</p>
<p>But for the generation of the answers to the questions, we will use two other LLMs, namely: Llama-2 and Mistral. In order to do this, we first a create a vector store for our documents and an associated retriever, which both of the LLM answer-generators will use.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">llama_index</span> <span class="kn">import</span> <span class="n">VectorStoreIndex</span>
<span class="kn">from</span> <span class="nn">llama_index.indices.vector_store.retrievers</span> <span class="kn">import</span> <span class="n">VectorIndexRetriever</span>

<span class="c1"># Create vector index</span>
<span class="n">train_index</span> <span class="o">=</span> <span class="n">VectorStoreIndex</span><span class="o">.</span><span class="n">from_documents</span><span class="p">(</span><span class="n">documents</span><span class="o">=</span><span class="n">train_documents</span><span class="p">)</span>

<span class="c1"># Create the retriver on this index</span>
<span class="n">train_retriever</span> <span class="o">=</span> <span class="n">VectorIndexRetriever</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="n">train_index</span><span class="p">,</span>
    <span class="n">similarity_top_k</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Create vector index for test to be used later</span>
<span class="n">test_index</span> <span class="o">=</span> <span class="n">VectorStoreIndex</span><span class="o">.</span><span class="n">from_documents</span><span class="p">(</span><span class="n">documents</span><span class="o">=</span><span class="n">test_documents</span><span class="p">)</span>

<span class="c1"># Create the retriver for test to be used later</span>
<span class="n">test_retriever</span> <span class="o">=</span> <span class="n">VectorIndexRetriever</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="n">test_index</span><span class="p">,</span>
    <span class="n">similarity_top_k</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>From here we will build <code class="docutils literal notranslate"><span class="pre">RetrieverQueryEngine</span></code>’s that will take in our queries (i.e. questions) for processing. Note that we use <code class="docutils literal notranslate"><span class="pre">HuggingFaceInferenceAPI</span></code> for our LLM answer-generators, and that Llama-2 requires permissions. If you haven’t yet gain accessed to these models, then feel free to swap out Llama-2 with another model of your choosing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">llama_index.query_engine.retriever_query_engine</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">RetrieverQueryEngine</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">llama_index.llms</span> <span class="kn">import</span> <span class="n">HuggingFaceInferenceAPI</span>
<span class="kn">from</span> <span class="nn">llama_index.llm_predictor</span> <span class="kn">import</span> <span class="n">LLMPredictor</span>


<span class="k">def</span> <span class="nf">create_query_engine</span><span class="p">(</span>
    <span class="n">hf_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">retriever</span><span class="p">:</span> <span class="n">VectorIndexRetriever</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RetrieverQueryEngine</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a RetrieverQueryEngine using the HuggingFaceInferenceAPI LLM&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">hf_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">hf_llm_generators</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;model not listed in hf_llm_generators&quot;</span><span class="p">)</span>
    <span class="n">llm</span> <span class="o">=</span> <span class="n">HuggingFaceInferenceAPI</span><span class="p">(</span>
        <span class="n">model_name</span><span class="o">=</span><span class="n">hf_llm_generators</span><span class="p">[</span><span class="n">hf_name</span><span class="p">],</span>
        <span class="n">context_window</span><span class="o">=</span><span class="mi">2048</span><span class="p">,</span>  <span class="c1"># to use refine</span>
        <span class="n">token</span><span class="o">=</span><span class="n">HUGGING_FACE_TOKEN</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">context</span> <span class="o">=</span> <span class="n">ServiceContext</span><span class="o">.</span><span class="n">from_defaults</span><span class="p">(</span><span class="n">llm_predictor</span><span class="o">=</span><span class="n">LLMPredictor</span><span class="p">(</span><span class="n">llm</span><span class="o">=</span><span class="n">llm</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">RetrieverQueryEngine</span><span class="o">.</span><span class="n">from_args</span><span class="p">(</span>
        <span class="n">retriever</span><span class="o">=</span><span class="n">retriever</span><span class="p">,</span> <span class="n">service_context</span><span class="o">=</span><span class="n">context</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define our llm-generators (query_engines)</span>
<span class="n">hf_llm_generators</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;mistral-7b-instruct&quot;</span><span class="p">:</span> <span class="s2">&quot;mistralai/Mistral-7B-Instruct-v0.1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;llama2-7b-chat&quot;</span><span class="p">:</span> <span class="s2">&quot;meta-llama/Llama-2-7b-chat-hf&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">train_query_engines</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">mdl</span><span class="p">:</span> <span class="n">create_query_engine</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">train_retriever</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">mdl</span> <span class="ow">in</span> <span class="n">hf_llm_generators</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">test_query_engines</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">mdl</span><span class="p">:</span> <span class="n">create_query_engine</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">test_retriever</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">mdl</span> <span class="ow">in</span> <span class="n">hf_llm_generators</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>We’re ready to now to produce the answers from the various LLMs. We’ll do this now for the <code class="docutils literal notranslate"><span class="pre">train_dataset</span></code> and hold off on doing this for <code class="docutils literal notranslate"><span class="pre">test_dataset</span></code> until the time comes for us to use it.</p>
<p>NOTE: this will take some time to generate. If you’d rather not wait, you have the option of loading the <code class="docutils literal notranslate"><span class="pre">train_qa.jsonl</span></code> that contains Llama-2 and Mistral answers per question.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tqdm</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">train_dataset</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="o">.</span><span class="n">tqdm</span><span class="p">(</span><span class="n">train_questions</span><span class="p">):</span>
    <span class="c1"># randomly select two LLMs to generate answers to this q</span>
    <span class="n">model_versus</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">train_query_engines</span><span class="o">.</span><span class="n">items</span><span class="p">()),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="c1"># data for this q</span>
    <span class="n">data_entry</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="n">q</span><span class="p">}</span>
    <span class="n">responses</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">source</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># generate answers</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">engine</span> <span class="ow">in</span> <span class="n">model_versus</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
        <span class="n">response_struct</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">response_struct</span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">response_struct</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">source</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">source</span> <span class="o">==</span> <span class="n">response</span><span class="o">.</span><span class="n">source_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">text</span><span class="p">[:</span><span class="mi">1000</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">source_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">text</span><span class="p">[:</span><span class="mi">1000</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
        <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">response_struct</span><span class="p">)</span>

    <span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">responses</span>
    <span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">source</span>
    <span class="n">train_dataset</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_entry</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 75/75 [07:40&lt;00:00,  6.14s/it]
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="get-gpt-4-evaluations-on-the-mistral-and-llama-2-answers">
<h3>Get GPT-4 Evaluations On The Mistral and LLama-2 Answers<a class="headerlink" href="#get-gpt-4-evaluations-on-the-mistral-and-llama-2-answers" title="Permalink to this heading"></a></h3>
<p>As mentioned a couple of times before, the point of this guide is fine-tune an LLM judge from a GPT-4 judge. So, in order to complete our <code class="docutils literal notranslate"><span class="pre">train_dataset</span></code> we now need to instantiate our GPT-4 judge and have it evaluate the answers that were provided by the other LLMs: Llama-2 and Mistral. To do this, we will use the <code class="docutils literal notranslate"><span class="pre">PairwiseComparisonEvaluator</span></code> class. What this judge will do then is it will compare the two answers and provide a verdict as to whether Llama-2’s answer is better, Mistral’s answer is better, or if it’s a tie.</p>
<p>There is a bit of added nuance here since with pairwise evaluations, we have to be mindful of the potential for “position-bias”. This is when the judge favours the first answer that was presented to it (within the prompt/context). To account for this position-bias, we invoke the GPT-4 judge to perform to evaluations per sample, where in the second evaluation, we switch the order of presentation of the two answers (i.e., first evaluation: Llama-2 then Mistral, second evaluation: Mistral then Llama-2).</p>
<p>Finally, we also use the <code class="docutils literal notranslate"><span class="pre">OpenAIFineTuningHandler</span></code> which will collect all the chat histories that we will eventually need to fine-tune GPT-3.5.</p>
<p>NOTE: this will take some time to generate the judgements. Again, you have the option to load the <code class="docutils literal notranslate"><span class="pre">train_qa.jsonl</span></code> as <code class="docutils literal notranslate"><span class="pre">train_dataset</span></code>. Moreover, we also stored the JSONL files that we passed to OpenAI to fine-tune GPT-3.5.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># instantiate the gpt-4 judge</span>
<span class="kn">from</span> <span class="nn">llama_index.llms</span> <span class="kn">import</span> <span class="n">OpenAI</span>
<span class="kn">from</span> <span class="nn">llama_index</span> <span class="kn">import</span> <span class="n">ServiceContext</span>
<span class="kn">from</span> <span class="nn">llama_index.callbacks</span> <span class="kn">import</span> <span class="n">OpenAIFineTuningHandler</span>
<span class="kn">from</span> <span class="nn">llama_index.callbacks</span> <span class="kn">import</span> <span class="n">CallbackManager</span>
<span class="kn">from</span> <span class="nn">llama_index.evaluation</span> <span class="kn">import</span> <span class="n">PairwiseComparisonEvaluator</span>

<span class="c1"># NOTE: this finetuning_handler will collect 2x chat_histories for</span>
<span class="c1"># each query: one for original, and another for flipped</span>
<span class="n">main_finetuning_handler</span> <span class="o">=</span> <span class="n">OpenAIFineTuningHandler</span><span class="p">()</span>
<span class="n">callback_manager</span> <span class="o">=</span> <span class="n">CallbackManager</span><span class="p">([</span><span class="n">main_finetuning_handler</span><span class="p">])</span>
<span class="n">gpt_4_context</span> <span class="o">=</span> <span class="n">ServiceContext</span><span class="o">.</span><span class="n">from_defaults</span><span class="p">(</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">OpenAI</span><span class="p">(</span><span class="n">temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4&quot;</span><span class="p">),</span>
    <span class="n">callback_manager</span><span class="o">=</span><span class="n">callback_manager</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">gpt4_judge</span> <span class="o">=</span> <span class="n">PairwiseComparisonEvaluator</span><span class="p">(</span><span class="n">service_context</span><span class="o">=</span><span class="n">gpt_4_context</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">data_entry</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="o">.</span><span class="n">tqdm</span><span class="p">(</span><span class="n">train_dataset</span><span class="p">):</span>
    <span class="n">final_eval_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">gpt4_judge</span><span class="o">.</span><span class="n">aevaluate</span><span class="p">(</span>
        <span class="n">query</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;question&quot;</span><span class="p">],</span>
        <span class="n">response</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
        <span class="n">second_response</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
        <span class="n">reference</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="c1"># save final result</span>
    <span class="n">judgement</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;llm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;gpt_4&quot;</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">score</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">response</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">pairwise_source</span>
    <span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;evaluations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">judgement</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 75/75 [48:04&lt;00:00, 38.46s/it]
</pre></div>
</div>
</div>
</div>
<p>Let’s see how one of these GPT-4 evaluations looks like.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s see the last one</span>
<span class="n">display_eval_df</span><span class="p">(</span>
    <span class="n">question</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;question&quot;</span><span class="p">],</span>
    <span class="n">source</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
    <span class="n">answer_a</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
    <span class="n">answer_b</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">result</span><span class="o">=</span><span class="n">final_eval_result</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_47a77_row0_col3, #T_47a77_row0_col5 {
  inline-size: 300px;
  overflow-wrap: break-word;
}
</style>
<table id="T_47a77">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_47a77_level0_col0" class="col_heading level0 col0" >Question</th>
      <th id="T_47a77_level0_col1" class="col_heading level0 col1" >Source</th>
      <th id="T_47a77_level0_col2" class="col_heading level0 col2" >Model A</th>
      <th id="T_47a77_level0_col3" class="col_heading level0 col3" >Answer A</th>
      <th id="T_47a77_level0_col4" class="col_heading level0 col4" >Model B</th>
      <th id="T_47a77_level0_col5" class="col_heading level0 col5" >Answer B</th>
      <th id="T_47a77_level0_col6" class="col_heading level0 col6" >Score</th>
      <th id="T_47a77_level0_col7" class="col_heading level0 col7" >Judgement</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_47a77_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_47a77_row0_col0" class="data row0 col0" >What resources are available in Boston for studying and preserving historical artifacts and remains?</td>
      <td id="T_47a77_row0_col1" class="data row0 col1" >In 1963, Boston Mayor John F. Collins and Boston Redevelopment Authority (BRA) executive Edward J. Logue organized a consortium of savings banks, cooperatives, and federal and state savings and loan associations in the city called the Boston Banks Urban Renewal Group (B-BURG) that would reverse redline parts of Dorchester, Roxbury, and Mattapan along Blue Hill Avenue. Despite the passage of legislation by the 156th Massachusetts General Court banning racial discrimination or segregation in housing in 1950, as well as the issuance of Executive Order 11063 by President John F. Kennedy in 1962 requiring all federal agencies to prevent racial discrimination in all federally-funded subsidized housing in the United States, the Boston Housing Authority (BHA) Board actively segregated the public housing developments in the city during the Collins administration as well, with BHA departments engaging in bureaucratic resistance against integration through at least 1966 and the Board retaining co...</td>
      <td id="T_47a77_row0_col2" class="data row0 col2" >llama2-7b-chat</td>
      <td id="T_47a77_row0_col3" class="data row0 col3" >
There are several resources available in Boston for studying and preserving historical artifacts and remains. Some of these include:

1. The Boston Historical Society: This organization provides access to historical artifacts, photographs, and documents related to Boston's history.
2. Boston Mapjunction: This website provides over 200 historical maps of Boston dating back to 1630, as well as aerial photos compared with maps of today.
3. City of Boston Archaeology Program and Lab: The City of Boston has a City Archaeologist on staff to oversee any lots of land to be developed for historical artifacts and significance, and to manage the archaeological remains located on public land in Boston. The program also has an Archaeology Laboratory and Education and Curation Center.
4. The Freedom House Photographs Collection: This collection contains over 2,000 images of Roxbury people, places, and events from 1950 to 1975.
5. Vital Records of Boston: This resource provides access to historical records related to births, marriages, and deaths in Boston.
6. Reading and Everyday Life in</td>
      <td id="T_47a77_row0_col4" class="data row0 col4" >mistral-7b-instruct</td>
      <td id="T_47a77_row0_col5" class="data row0 col5" >
The City of Boston has a City Archaeologist on staff to oversee any lots of land to be developed for historical artifacts and significance, and to manage the archaeological remains located on public land in Boston, and also has a City Archaeology Program and an Archaeology Laboratory, Education and Curation Center. The Freedom House Photographs Collection contains over 2,000 images of Roxbury people, places and events, 1950–1975 (Archives and Special Collections of the Northeastern University Libraries in Boston, MA).</td>
      <td id="T_47a77_row0_col6" class="data row0 col6" >1.000000</td>
      <td id="T_47a77_row0_col7" class="data row0 col7" >Assistant A provides a more comprehensive answer, listing several resources available in Boston for studying and preserving historical artifacts and remains. These include the Boston Historical Society, Boston Mapjunction, the City of Boston Archaeology Program and Lab, the Freedom House Photographs Collection, and Vital Records of Boston. This answer is more detailed and provides a wider range of resources for the user to explore.

Assistant B, on the other hand, only mentions the City of Boston Archaeology Program and Lab and the Freedom House Photographs Collection. While these are relevant resources, the answer lacks the depth and variety of Assistant A's response.

Therefore, based on the depth, variety, and level of detail in the responses, Assistant A's answer is superior.

Final Verdict: [[A]]</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="section" id="special-care-to-the-fine-tuning-jsonl">
<h4>Special Care To The Fine-Tuning JSONL<a class="headerlink" href="#special-care-to-the-fine-tuning-jsonl" title="Permalink to this heading"></a></h4>
<p>Since there are two evaluations (one for original order of presentation of the LLM answers and another for a flipped ordering), we need to be careful to choose the correct one to keep in our fine-tuning dataset. What this means is that we need to pick off the correct events that were collected by our <code class="docutils literal notranslate"><span class="pre">OpenAIFineTuningHandler</span></code> and then only use those to prepare the JSONL which we will pass to OpenAI’s fine-tuning API.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">main_finetuning_handler</span><span class="o">.</span><span class="n">save_finetuning_events</span><span class="p">(</span>
    <span class="s2">&quot;pairwise_finetuning_events.jsonl&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Wrote 150 examples to pairwise_finetuning_events.jsonl
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the fine_tuning_examples master dataset</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;pairwise_finetuning_events.jsonl&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">combined_finetuning_events</span> <span class="o">=</span> <span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">finetuning_events</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">[]</span>
<span class="p">)</span>  <span class="c1"># for storing events using original order of presentation</span>
<span class="n">flipped_finetuning_events</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">[]</span>
<span class="p">)</span>  <span class="c1"># for storing events using flipped order of presentation</span>

<span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">event</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">combined_finetuning_events</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ix</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># we always do original ordering first</span>
        <span class="n">finetuning_events</span> <span class="o">+=</span> <span class="p">[</span><span class="n">event</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># then we flip order and have GPT-4 make another judgement</span>
        <span class="n">flipped_finetuning_events</span> <span class="o">+=</span> <span class="p">[</span><span class="n">event</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">finetuning_events</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">flipped_finetuning_events</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># we need to pick which of the chat_histories to keep</span>
<span class="n">resolved_finetuning_events</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">data_entry</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">train_dataset</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;evaluations&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;original&quot;</span><span class="p">:</span>
        <span class="n">resolved_finetuning_events</span> <span class="o">+=</span> <span class="p">[</span><span class="n">finetuning_events</span><span class="p">[</span><span class="n">ix</span><span class="p">]]</span>
    <span class="k">elif</span> <span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;evaluations&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;flipped&quot;</span><span class="p">:</span>
        <span class="n">resolved_finetuning_events</span> <span class="o">+=</span> <span class="p">[</span><span class="n">flipped_finetuning_events</span><span class="p">[</span><span class="n">ix</span><span class="p">]]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">continue</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;resolved_pairwise_finetuning_events.jsonl&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">resolved_finetuning_events</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">entry</span><span class="p">),</span> <span class="n">file</span><span class="o">=</span><span class="n">outfile</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="step-2-perform-knowledge-distillation">
<h2>Step 2 Perform knowledge distillation<a class="headerlink" href="#step-2-perform-knowledge-distillation" title="Permalink to this heading"></a></h2>
<p>Okay, it’s now time to distill some knowledge from GPT-4 to GPT-3.5 To do this, we will make use of the <code class="docutils literal notranslate"><span class="pre">OpenAIFinetuneEngine</span></code> class as well as the <code class="docutils literal notranslate"><span class="pre">resolved_pairwise_finetuning_events.jsonl</span></code> file that we just created.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">llama_index.finetuning</span> <span class="kn">import</span> <span class="n">OpenAIFinetuneEngine</span>

<span class="n">finetune_engine</span> <span class="o">=</span> <span class="n">OpenAIFinetuneEngine</span><span class="p">(</span>
    <span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span>
    <span class="s2">&quot;resolved_pairwise_finetuning_events.jsonl&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">finetune_engine</span><span class="o">.</span><span class="n">finetune</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Num examples: 72
First example:
{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &quot;Please act as an impartial judge and evaluate the quality of the responses provided by two AI question-answering assistants to the user question perhaps with added reference which are displayed below. You should choose the assistant that follows the user’s instructions and answers the user’s question better using the provided context. Your evaluation should consider factors such as the helpfulness, relevance, accuracy, depth, creativity, and level of detail of their responses. Begin your evaluation by comparing the two responses and provide a short explanation. Avoid any position biases and ensure that the order in which the responses were presented does not influence your decision. Do not allow the length of the responses to influence your evaluation. Do not favor certain names of the assistants. Be as objective as possible. After providing your explanation, output your final verdict by strictly following this format: &#39;[[A]]&#39; if assistant A is better, &#39;[[B]]&#39; if assistant B is better, and &#39;[[C]]&#39; for a tie.\n&quot;}
{&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &quot;[User Question]\nWhat event in 1906 caused significant damage to San Francisco but was followed by a quick rebuild?\n\n[The Start of Reference]\n=== Reconstruction ===\nAlmost immediately after the quake re-planning and reconstruction plans were hatched to quickly rebuild the city. One of the more famous and ambitious plans, proposed before the fire, came from famed urban planner, Daniel Burnham. His bold plan called for Haussmann style avenues, boulevards, and arterial thoroughfares that radiated across the city, a massive civic center complex with classical structures, what would have been the largest urban park in the world, stretching from Twin Peaks to Lake Merced with a large athenaeum at its peak, and various other proposals. This plan was dismissed by critics (both at the time and now), as impractical and unrealistic to municipal supply and demand. Property owners and the Real Estate industry were against the idea as well due to the amounts of their land the city would have to purchase to realize such proposals. While the original street grid was restored, many of Burnham&#39;s proposals eventually saw the light of day such ...\n[The End of Reference]\n\n[The Start of Assistant A’s Answer]\n\n\nThe 1906 earthquake and fire caused significant damage to San Francisco, with over 80% of the city destroyed, including almost all of the downtown core. The earthquake, which had a magnitude of 7.8 on the Richter scale, resulted from the rupture of over 270 miles of the San Andreas Fault, centered immediately offshore of San Francisco. Water mains ruptured throughout the city, and the fires that followed burned out of control for days, trapping many residents and causing widespread destruction. Despite the devastation, the city quickly rebuilt, with many of the buildings constructed after the disaster being more earthquake-resistant than those that had come before. The official death toll from this event was initially reported as 478, but was later revised to over 3,000.\n[The End of Assistant A’s Answer]\n\n[The Start of Assistant B’s Answer]\n1906 earthquake and fire.\n[The End of Assistant B’s Answer]&quot;}
{&#39;role&#39;: &#39;assistant&#39;, &#39;content&#39;: &quot;Assistant A provides a detailed and comprehensive response to the user&#39;s question, explaining the event that caused significant damage to San Francisco in 1906, which was the earthquake and fire. It also provides additional information about the earthquake&#39;s magnitude, the extent of the damage, and the city&#39;s quick rebuilding efforts. On the other hand, Assistant B&#39;s response is very brief and only mentions the earthquake and fire, without providing any additional information or context. Therefore, Assistant A&#39;s response is more helpful, relevant, accurate, and detailed. \n\nFinal Verdict: [[A]]&quot;}
No errors found
Num examples missing system message: 0
Num examples missing user message: 0

#### Distribution of num_messages_per_example:
min / max: 3, 3
mean / median: 3.0, 3.0
p5 / p95: 3.0, 3.0

#### Distribution of num_total_tokens_per_example:
min / max: 579, 1198
mean / median: 818.9305555555555, 772.0
p5 / p95: 625.9, 1076.0

#### Distribution of num_assistant_tokens_per_example:
min / max: 66, 248
mean / median: 129.26388888888889, 117.5
p5 / p95: 81.0, 193.9

0 examples may be over the 4096 token limit, they will be truncated during fine-tuning
Dataset has ~58963 tokens that will be charged for during training
By default, you&#39;ll train for 3 epochs on this dataset
By default, you&#39;ll be charged for ~176889 tokens
As of August 22, 2023, fine-tuning gpt-3.5-turbo is $0.008 / 1K Tokens.
This means your total cost for training will be $0.471704 per epoch.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We can check the status of our current job as follows</span>
<span class="c1"># This may take some time ...</span>
<span class="n">finetune_engine</span><span class="o">.</span><span class="n">get_current_job</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;FineTuningJob fine_tuning.job id=ftjob-jLxZggQbHz2F98IlhQEI9KIw at 0x2e6b91170&gt; JSON: {
  &quot;object&quot;: &quot;fine_tuning.job&quot;,
  &quot;id&quot;: &quot;ftjob-jLxZggQbHz2F98IlhQEI9KIw&quot;,
  &quot;model&quot;: &quot;gpt-3.5-turbo-0613&quot;,
  &quot;created_at&quot;: 1698817329,
  &quot;finished_at&quot;: 1698817949,
  &quot;fine_tuned_model&quot;: &quot;ft:gpt-3.5-turbo-0613:llamaindex::8FyRSSOl&quot;,
  &quot;organization_id&quot;: &quot;org-1ZDAvajC6v2ZtAP9hLEIsXRz&quot;,
  &quot;result_files&quot;: [
    &quot;file-qLTnxGSZX2rHP0Q7wJIDDNWX&quot;
  ],
  &quot;status&quot;: &quot;succeeded&quot;,
  &quot;validation_file&quot;: null,
  &quot;training_file&quot;: &quot;file-xsAaOBjQ949ti0qk1xHHLOiF&quot;,
  &quot;hyperparameters&quot;: {
    &quot;n_epochs&quot;: 3
  },
  &quot;trained_tokens&quot;: 176457,
  &quot;error&quot;: null
}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="evaluate-the-fine-tuned-gpt-3-5-judge-on-the-test-dataset">
<h2>3 Evaluate The Fine-Tuned GPT-3.5 Judge On The Test Dataset<a class="headerlink" href="#evaluate-the-fine-tuned-gpt-3-5-judge-on-the-test-dataset" title="Permalink to this heading"></a></h2>
<p>Now that we have our fine-tuned GPT-3.5, let’s see how well it performs on a test set. But first, remember that we said we’d hold off on creating the <code class="docutils literal notranslate"><span class="pre">test_dataset</span></code> until the time comes that we need it? Well, that time is now. So we will repeat the process of creating the <code class="docutils literal notranslate"><span class="pre">train_dataset</span></code> here but instead now for the <code class="docutils literal notranslate"><span class="pre">test_dataset</span></code>.</p>
<p>NOTE: generating these answers and evaluations will take some time. You have the option of loading <code class="docutils literal notranslate"><span class="pre">test_qa_complete.jsonl</span></code> which has all the evaluations from the three considered LLM judges. You can load that as <code class="docutils literal notranslate"><span class="pre">test_dataset</span></code> and run the code found in the Metrics subsection below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="c1"># Use Llama-2 and Mistral LLMs to generate the answers to the test queries</span>
<span class="n">test_dataset</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="o">.</span><span class="n">tqdm</span><span class="p">(</span><span class="n">test_questions</span><span class="p">):</span>
    <span class="c1"># randomly select two LLMs to generate answers to this q</span>
    <span class="n">model_versus</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">test_query_engines</span><span class="o">.</span><span class="n">items</span><span class="p">()),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="c1"># data for this q</span>
    <span class="n">data_entry</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="n">q</span><span class="p">}</span>
    <span class="n">responses</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">source</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># generate answers</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">engine</span> <span class="ow">in</span> <span class="n">model_versus</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
        <span class="n">response_struct</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">response_struct</span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">response_struct</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">source</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">source</span> <span class="o">==</span> <span class="n">response</span><span class="o">.</span><span class="n">source_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">text</span><span class="p">[:</span><span class="mi">1000</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">source_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">text</span><span class="p">[:</span><span class="mi">1000</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
        <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">response_struct</span><span class="p">)</span>

    <span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">responses</span>
    <span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">source</span>
    <span class="n">test_dataset</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_entry</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 64/64 [28:23&lt;00:00, 26.62s/it]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get the gpt-4 judgments on the Mistal and Llama-2 answers</span>
<span class="k">for</span> <span class="n">data_entry</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="o">.</span><span class="n">tqdm</span><span class="p">(</span><span class="n">test_dataset</span><span class="p">):</span>
    <span class="n">final_eval_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">gpt4_judge</span><span class="o">.</span><span class="n">aevaluate</span><span class="p">(</span>
        <span class="n">query</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;question&quot;</span><span class="p">],</span>
        <span class="n">response</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
        <span class="n">second_response</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
        <span class="n">reference</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="c1"># save final result</span>
    <span class="n">judgement</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;llm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;gpt_4&quot;</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">score</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">response</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">pairwise_source</span>
    <span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;evaluations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">judgement</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 64/64 [43:21&lt;00:00, 40.66s/it]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">llama_index.evaluation</span> <span class="kn">import</span> <span class="n">EvaluationResult</span>

<span class="c1"># use our fine-tuned GPT-3.5 to evaluate the answers</span>
<span class="n">ft_llm</span> <span class="o">=</span> <span class="n">finetune_engine</span><span class="o">.</span><span class="n">get_finetuned_model</span><span class="p">()</span>

<span class="n">ft_context</span> <span class="o">=</span> <span class="n">ServiceContext</span><span class="o">.</span><span class="n">from_defaults</span><span class="p">(</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">ft_llm</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">ft_gpt_3p5_judge</span> <span class="o">=</span> <span class="n">PairwiseComparisonEvaluator</span><span class="p">(</span><span class="n">service_context</span><span class="o">=</span><span class="n">ft_context</span><span class="p">)</span>

<span class="k">for</span> <span class="n">data_entry</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="o">.</span><span class="n">tqdm</span><span class="p">(</span><span class="n">test_dataset</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">final_eval_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ft_gpt_3p5_judge</span><span class="o">.</span><span class="n">aevaluate</span><span class="p">(</span>
            <span class="n">query</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;question&quot;</span><span class="p">],</span>
            <span class="n">response</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
            <span class="n">second_response</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
            <span class="n">reference</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">final_eval_result</span> <span class="o">=</span> <span class="n">EvaluationResult</span><span class="p">(</span>
            <span class="n">query</span><span class="o">=</span><span class="n">eval_result</span><span class="o">.</span><span class="n">query</span><span class="p">,</span>
            <span class="n">response</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">passing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">score</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
            <span class="n">feedback</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">pairwise_source</span><span class="o">=</span><span class="s2">&quot;output-cannot-be-parsed&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># save final result</span>
    <span class="n">judgement</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;llm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ft_gpt_3p5&quot;</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">score</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">response</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">pairwise_source</span>
    <span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;evaluations&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">judgement</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 64/64 [04:08&lt;00:00,  3.88s/it]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Similarly, use a non-fine-tuned judge to evaluate the answers</span>
<span class="n">gpt_3p5_context</span> <span class="o">=</span> <span class="n">ServiceContext</span><span class="o">.</span><span class="n">from_defaults</span><span class="p">(</span>
    <span class="n">llm</span><span class="o">=</span><span class="n">OpenAI</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">gpt_3p5_judge</span> <span class="o">=</span> <span class="n">PairwiseComparisonEvaluator</span><span class="p">(</span><span class="n">service_context</span><span class="o">=</span><span class="n">gpt_3p5_context</span><span class="p">)</span>

<span class="k">for</span> <span class="n">data_entry</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="o">.</span><span class="n">tqdm</span><span class="p">(</span><span class="n">test_dataset</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">final_eval_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">gpt_3p5_judge</span><span class="o">.</span><span class="n">aevaluate</span><span class="p">(</span>
            <span class="n">query</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;question&quot;</span><span class="p">],</span>
            <span class="n">response</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
            <span class="n">second_response</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;answers&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
            <span class="n">reference</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">final_eval_result</span> <span class="o">=</span> <span class="n">EvaluationResult</span><span class="p">(</span>
            <span class="n">query</span><span class="o">=</span><span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;question&quot;</span><span class="p">],</span>
            <span class="n">response</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">passing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">score</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
            <span class="n">feedback</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">pairwise_source</span><span class="o">=</span><span class="s2">&quot;output-cannot-be-parsed&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># save final result</span>
    <span class="n">judgement</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;llm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;gpt_3p5&quot;</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">score</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">response</span>
    <span class="n">judgement</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_eval_result</span><span class="o">.</span><span class="n">pairwise_source</span>
    <span class="n">data_entry</span><span class="p">[</span><span class="s2">&quot;evaluations&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">judgement</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 64/64 [09:32&lt;00:00,  8.95s/it]
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-metrics">
<h3>The Metrics<a class="headerlink" href="#the-metrics" title="Permalink to this heading"></a></h3>
<p>Phew! Now that we have generated all of the LLM judges evaluations of the Llama-2/Mistral answers on the test queries. Let’s now get a quantitative view on how close fine-tuned GPT-3.5 is to GPT-4.</p>
<p>For this, we report several metrics, namely:</p>
<ul class="simple">
<li><p>Agreement Rate with GPT-4 evaluations</p></li>
<li><p>Correlation to GPT-4 evaluations</p></li>
<li><p>Jaccard Similarity to GPT-4 evaluations</p></li>
</ul>
<p>We also report the “inconclusive” counts, which is when the LLM judge switches its decision after being presented with the flipped order of presentation of Llama-2 and Mistral answers. Higher inconclusive counts is an indication of the LLM judge being susceptible to position bias, which is no good!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>scikit-learn<span class="w"> </span>-q
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> A new release of pip is available: <span class=" -Color -Color-Red">23.2.1</span> -&gt; <span class=" -Color -Color-Green">23.3.1</span>
<span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> To update, run: <span class=" -Color -Color-Green">pip install --upgrade pip</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># store the scores and inconclusive booleans for each sample per LLM judge</span>
<span class="n">scores</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;gpt_4&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;gpt_3p5&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;ft_gpt_3p5&quot;</span><span class="p">:</span> <span class="p">[]}</span>
<span class="n">inconclusives</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;gpt_4&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;gpt_3p5&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;ft_gpt_3p5&quot;</span><span class="p">:</span> <span class="p">[]}</span>

<span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">test_dataset</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;evaluations&quot;</span><span class="p">]:</span>
        <span class="n">scores</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;llm&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">])</span>
        <span class="n">inconclusives</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;llm&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">e</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;original&quot;</span><span class="p">,</span> <span class="s2">&quot;flipped&quot;</span><span class="p">]</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">REPORT_FMT_STR</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;</span><span class="si">{model}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="s2">&quot;-----------------</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="s2">&quot;Number of inconclusives: </span><span class="si">{inconclusive}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="s2">&quot;Number of agreements with GPT-4: </span><span class="si">{agreement}</span><span class="s2"> out of </span><span class="si">{total}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="s2">&quot;Agreement rate: </span><span class="si">{agreement_rate}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="s2">&quot;Correlation: </span><span class="si">{corr}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="s2">&quot;Jaccard: </span><span class="si">{jacc}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">jaccard_score</span>

<span class="c1"># numpy conversion</span>
<span class="n">np_scores_gpt_4</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="s2">&quot;gpt_4&quot;</span><span class="p">])</span>
<span class="n">np_scores_gpt_3p5</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="s2">&quot;gpt_3p5&quot;</span><span class="p">])</span>
<span class="n">np_scores_ft_gpt_3p5</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="s2">&quot;ft_gpt_3p5&quot;</span><span class="p">])</span>

<span class="c1"># can only compare when both judges have non inconclusive results</span>
<span class="n">ft_mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">inconclusives</span><span class="p">[</span><span class="s2">&quot;gpt_4&quot;</span><span class="p">])</span> <span class="o">*</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
    <span class="n">inconclusives</span><span class="p">[</span><span class="s2">&quot;ft_gpt_3p5&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">no_ft_mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">inconclusives</span><span class="p">[</span><span class="s2">&quot;gpt_4&quot;</span><span class="p">])</span> <span class="o">*</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
    <span class="n">inconclusives</span><span class="p">[</span><span class="s2">&quot;gpt_3p5&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># agreement rates</span>
<span class="n">agreement_ft</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">np_scores_gpt_4</span><span class="p">[</span><span class="n">ft_mask</span><span class="p">]</span> <span class="o">==</span> <span class="n">np_scores_ft_gpt_3p5</span><span class="p">[</span><span class="n">ft_mask</span><span class="p">])</span>
<span class="n">agreement_rate_ft</span> <span class="o">=</span> <span class="n">agreement_ft</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">ft_mask</span><span class="p">)</span>
<span class="n">agreement_no_ft</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
    <span class="n">np_scores_gpt_4</span><span class="p">[</span><span class="n">no_ft_mask</span><span class="p">]</span> <span class="o">==</span> <span class="n">np_scores_gpt_3p5</span><span class="p">[</span><span class="n">no_ft_mask</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">agreement_rate_no_ft</span> <span class="o">=</span> <span class="n">agreement_no_ft</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">no_ft_mask</span><span class="p">)</span>

<span class="c1"># correlations</span>
<span class="n">corr_ft</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">corrcoef</span><span class="p">(</span><span class="n">np_scores_gpt_4</span><span class="p">[</span><span class="n">ft_mask</span><span class="p">],</span> <span class="n">np_scores_ft_gpt_3p5</span><span class="p">[</span><span class="n">ft_mask</span><span class="p">])[</span>
    <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
<span class="p">]</span>
<span class="n">corr_no_ft</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">corrcoef</span><span class="p">(</span>
    <span class="n">np_scores_gpt_4</span><span class="p">[</span><span class="n">no_ft_mask</span><span class="p">],</span> <span class="n">np_scores_gpt_3p5</span><span class="p">[</span><span class="n">no_ft_mask</span><span class="p">]</span>
<span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># jaccard</span>
<span class="n">jaccard_ft</span> <span class="o">=</span> <span class="n">jaccard_score</span><span class="p">(</span>
    <span class="n">np_scores_gpt_4</span><span class="p">[</span><span class="n">ft_mask</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span>
    <span class="n">np_scores_ft_gpt_3p5</span><span class="p">[</span><span class="n">ft_mask</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span>
    <span class="n">average</span><span class="o">=</span><span class="s2">&quot;weighted&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">jaccard_no_ft</span> <span class="o">=</span> <span class="n">jaccard_score</span><span class="p">(</span>
    <span class="n">np_scores_gpt_4</span><span class="p">[</span><span class="n">no_ft_mask</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span>
    <span class="n">np_scores_gpt_3p5</span><span class="p">[</span><span class="n">no_ft_mask</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span>
    <span class="n">average</span><span class="o">=</span><span class="s2">&quot;weighted&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="n">REPORT_FMT_STR</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;GPT-3.5 w/ fine-tuning&quot;</span><span class="p">,</span>
        <span class="n">inconclusive</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="n">inconclusives</span><span class="p">[</span><span class="s2">&quot;ft_gpt_3p5&quot;</span><span class="p">]),</span>
        <span class="n">agreement</span><span class="o">=</span><span class="n">agreement_ft</span><span class="p">,</span>
        <span class="n">total</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="n">ft_mask</span><span class="p">),</span>
        <span class="n">agreement_rate</span><span class="o">=</span><span class="n">agreement_rate_ft</span><span class="p">,</span>
        <span class="n">corr</span><span class="o">=</span><span class="n">corr_ft</span><span class="p">,</span>
        <span class="n">jacc</span><span class="o">=</span><span class="n">jaccard_ft</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="n">REPORT_FMT_STR</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;GPT-3.5 w/out fine-tuning&quot;</span><span class="p">,</span>
        <span class="n">inconclusive</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="n">inconclusives</span><span class="p">[</span><span class="s2">&quot;gpt_3p5&quot;</span><span class="p">]),</span>
        <span class="n">agreement</span><span class="o">=</span><span class="n">agreement_no_ft</span><span class="p">,</span>
        <span class="n">total</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="n">no_ft_mask</span><span class="p">),</span>
        <span class="n">agreement_rate</span><span class="o">=</span><span class="n">agreement_rate_no_ft</span><span class="p">,</span>
        <span class="n">corr</span><span class="o">=</span><span class="n">corr_no_ft</span><span class="p">,</span>
        <span class="n">jacc</span><span class="o">=</span><span class="n">jaccard_no_ft</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;GPT-4</span><span class="se">\n</span><span class="s2">-----------------</span><span class="se">\n</span><span class="s2">Inconclusive Count: </span><span class="si">{</span><span class="nb">sum</span><span class="p">(</span><span class="n">inconclusives</span><span class="p">[</span><span class="s1">&#39;gpt_4&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>GPT-3.5 w/ fine-tuning
-----------------
Number of inconclusives: 15
Number of agreements with GPT-4: 41 out of 47
Agreement rate: 0.8723404255319149
Correlation: 0.765365523658036
Jaccard: 0.773126734505088


GPT-3.5 w/out fine-tuning
-----------------
Number of inconclusives: 24
Number of agreements with GPT-4: 32 out of 38
Agreement rate: 0.8421052631578947
Correlation: 0.671929323262293
Jaccard: 0.7308712958867757


GPT-4
-----------------
Inconclusive Count: 4
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this heading"></a></h2>
<p>From the above numbers we see that fine-tuning a GPT-3.5 judge yields higher agreement scores, correlation, and jaccard similarity than a non-fine-tuned GPT-3.5 judge. What’s more is that we see the inconclusive counts go down after fine-tuning as well. Overall, we see that fine-tuning here has helped us to get a GPT-3.5 judge that is closer to a GPT-4 judge (and thus by proxy, closer to human judgements) and at the same time helped remedy the position bias that a non-fine-tuned GPT-3.5 would have otherwise.</p>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../../cross_encoder_finetuning/cross_encoder_finetuning.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">How to Finetune a cross-encoder using LLamaIndex</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../correctness/finetune_llm_judge_single_grading_correctness.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Knowledge Distillation For Fine-Tuning A GPT-3.5 Judge (Correctness)</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Jerry Liu
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Knowledge Distillation For Fine-Tuning A GPT-3.5 Judge (Pairwise)</a><ul>
<li><a class="reference internal" href="#step-1-generate-datasets-train-dataset-and-test-dataset">Step 1 Generate datasets: <code class="docutils literal notranslate"><span class="pre">train_dataset</span></code> and <code class="docutils literal notranslate"><span class="pre">test_dataset</span></code></a><ul>
<li><a class="reference internal" href="#use-a-datasetgenerator-to-build-train-dataset-and-test-dataset">Use a <code class="docutils literal notranslate"><span class="pre">DatasetGenerator</span></code> to build <code class="docutils literal notranslate"><span class="pre">train_dataset</span></code> and <code class="docutils literal notranslate"><span class="pre">test_dataset</span></code></a><ul>
<li><a class="reference internal" href="#generate-questions">Generate Questions</a></li>
<li><a class="reference internal" href="#generate-answers-to-the-questions">Generate Answers To The Questions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#get-gpt-4-evaluations-on-the-mistral-and-llama-2-answers">Get GPT-4 Evaluations On The Mistral and LLama-2 Answers</a><ul>
<li><a class="reference internal" href="#special-care-to-the-fine-tuning-jsonl">Special Care To The Fine-Tuning JSONL</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#step-2-perform-knowledge-distillation">Step 2 Perform knowledge distillation</a></li>
<li><a class="reference internal" href="#evaluate-the-fine-tuned-gpt-3-5-judge-on-the-test-dataset">3 Evaluate The Fine-Tuned GPT-3.5 Judge On The Test Dataset</a><ul>
<li><a class="reference internal" href="#the-metrics">The Metrics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/scripts/furo.js"></script>
    <script src="../../../../_static/js/mendablesearch.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3.3.3/dist/umd/index.js"></script>
    <script defer="defer" src="../../../../_static/js/algolia.js"></script>
    </body>
</html>